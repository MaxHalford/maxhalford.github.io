<!doctype html><html lang=en><head><script defer src=https://unpkg.com/@tinybirdco/flock.js data-host=https://api.tinybird.co data-token=p.eyJ1IjogImMwMjJhMjg1LWJmY2YtNDc0OC1hYzczLTJhMDQ1Njk3NTI0YyIsICJpZCI6ICIzNjc3NjQ3Ny04MTE2LTRmYWQtYjcwMy1iZmM3YjMwZGJjMjMifQ.A0vHm-VWbXG6uBFZiwuspN_AyfSYNrdZE3IgwgWSt4g></script><meta charset=utf-8><meta name=generator content="Hugo 0.113.0"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="Max Halford"><meta property="og:url" content="https://maxhalford.github.io/blog/bike-stations/"><link rel=canonical href=https://maxhalford.github.io/blog/bike-stations/><meta property="og:title" content="Visualizing bike stations live data"><meta property="og:description" content="Recently some friends and I decided to launch openbikes.co, a website for visualizing (and later on analyzing) urban bike traffic. We have a lot of ideas that we will progressively implement. Anyway, the point is that all of it started with me fiddling about with the JCDecaux API and the leaflet.js library and I would like to share it with you. Shall we?
Presentation In this post I want to show you the tools and the code to get a fully functional website for visualizing live data."><meta property="og:type" content="article"><meta property="og:url" content="https://maxhalford.github.io/blog/bike-stations/"><meta property="og:image" content="https://maxhalford.github.io/img/beach.jpg"><meta property="article:section" content="blog"><meta property="article:published_time" content="2015-06-03T00:00:00+00:00"><meta property="article:modified_time" content="2015-06-03T00:00:00+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://maxhalford.github.io/img/beach.jpg"><meta name=twitter:title content="Visualizing bike stations live data"><meta name=twitter:description content="Recently some friends and I decided to launch openbikes.co, a website for visualizing (and later on analyzing) urban bike traffic. We have a lot of ideas that we will progressively implement. Anyway, the point is that all of it started with me fiddling about with the JCDecaux API and the leaflet.js library and I would like to share it with you. Shall we?
Presentation In this post I want to show you the tools and the code to get a fully functional website for visualizing live data."><link rel=icon href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸ¦”</text></svg>"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/maxhalford.github.io\/"},"articleSection":"blog","name":"Visualizing bike stations live data","headline":"Visualizing bike stations live data","description":"Recently some friends and I decided to launch openbikes.co, a website for visualizing (and later on analyzing) urban bike traffic. We have a lot of ideas that we will progressively implement. Anyway, the point is that all of it started with me fiddling about with the JCDecaux API and the leaflet.js library and I would like to share it with you. Shall we?\nPresentation In this post I want to show you the tools and the code to get a fully functional website for visualizing live data.","inLanguage":"en-US","author":"Max Halford","creator":"Max Halford","publisher":"Max Halford","accountablePerson":"Max Halford","copyrightHolder":"Max Halford","copyrightYear":"2015","datePublished":"2015-06-03 00:00:00 \u002b0000 UTC","dateModified":"2015-06-03 00:00:00 \u002b0000 UTC","url":"https:\/\/maxhalford.github.io\/blog\/bike-stations\/","keywords":["data-viz"]}</script><title>Visualizing bike stations live data â€¢ Max Halford</title><meta property="og:title" content="Visualizing bike stations live data â€¢ Max Halford"><meta property="og:type" content="article"><meta name=description content="Recently some friends and I decided to launch openbikes.co, a website for visualizing (and later on analyzing) urban bike traffic. We have a lot of ideas that we will progressively implement. Anyway, the point is that all of it started with me fiddling about with the JCDecaux API and the leaflet.js library and I would like to share it with you. Shall we?
Presentation In this post I want to show you the tools and the code to get a fully functional website for visualizing live data."><link rel=stylesheet href=/css/flexboxgrid-6.3.1.min.css><link rel=stylesheet href=/css/github-markdown.min.css><link rel=stylesheet href=/css/highlight/github.css><link rel=stylesheet href=/css/index.css><link rel=preconnect href=https://fonts.gstatic.com><link href="https://fonts.googleapis.com/css2?family=PT+Serif:wght@400;700&family=Permanent+Marker&display=swap" rel=stylesheet><script>MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]],displayMath:[["$$","$$"],["\\[","\\]"]],processEscapes:!0,processEnvironments:!0,tags:"ams"},options:{skipHtmlTags:["script","noscript","style","textarea","pre"]}},window.addEventListener("load",e=>{document.querySelectorAll("mjx-container").forEach(function(e){e.parentElement.classList+="has-jax"})})</script><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script type=text/javascript id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script></head><body><article class=post id=article><div class="row center-xs" style=text-align:left><div class="col-xs-12 col-sm-10 col-md-7 col-lg-5"><div class=header><header class=header-parts><div class="signatures site-title"><a href=/>Max Halford ðŸ¦”</a></div><div class=header-links><a class=header-link href=/>Blog</a>
<a class=header-link href=/links/>Links</a>
<a class=header-link href=/bio/>Bio</a></div></header></div><header class=post-header><h1 class=post-title>Visualizing bike stations live data</h1><div class="row post-desc"><div class="col-xs-12 post-desc-items"><time class=post-date datetime="2015-06-03 00:00:00 UTC">2015-06-03</time>
<span class=posts-line-tag>data-viz</span></div></div></header><div class="post-content markdown-body"><p>Recently some friends and I decided to launch <a href=http://openbikes.co/>openbikes.co</a>, a website for visualizing (and later on analyzing) urban bike traffic. We have a lot of ideas that we will progressively implement. Anyway, the point is that all of it started with me fiddling about with the <em>JCDecaux</em> API and the <em>leaflet.js</em> library and I would like to share it with you. Shall we?</p><h2 id=presentation>Presentation</h2><p>In this post I want to show you the tools and the code to get a fully functional website for visualizing live data. In this particular case we will display bike stations in Toulouse, however I will keep the scripts as general as possible so they are easily modifiable for different data. Before starting here is a glimpse of the end result:</p><img class=centered src=/img/blog/bike-stations/bikes.png><p>Pretty neat right? The marker color represents how many bikes are available and the circle in the center of each marker shows how many bike stands are available. In both cases, the <font color=forestgreen>greener</font> the marker the higher the amount (a <font color=firebrick>red</font>) indicator means not a lot. Thus <font color=orange>yellow</font> means that the bike station is &ldquo;balanced&rdquo;. The cool thing is that you can set this up to update every minute or so.</p><h2 id=tools>Tools</h2><p>I&rsquo;ll be doing this in Python (3, but it shouldn&rsquo;t matter). Only two modules are needed: <a href=http://pandas.pydata.org/>pandas</a> (manipulating data frames) and <a href=http://flask.pocoo.org/>flask</a> (making and hosting a website). Both should be very easy to install on any platform as they are extremely popular modules.</p><p><a href=https://github.com/hiasinho/Leaflet.vector-markers>Download the leaflet vector marker library</a> (click on <code>Download ZIP</code> towards the bottom-right). All the other JavaScript libraries are accessible via the internet and don&rsquo;t need downloading.</p><p>Data will be collected from the JCDecaux API, if you don&rsquo;t know what an API is don&rsquo;t worry. However you will have to <a href=https://developer.jcdecaux.com/#/account>obtain a registration key</a> because I cannot give you mine. The reason why most APIs require users to have a registration key is so bots can&rsquo;t overflow their servers and slow/crash them.</p><p>That&rsquo;s it. You might want to use a nice text editor such as <a href=http://www.sublimetext.com/>sublime</a> for the HTML/JavaScript part. Also the markers on the map might not render well for deprecated navigator versions or with Internet Explorer, however everything certainly works with Chrome.</p><h2 id=prior-on-apis>Prior on APIs</h2><p>Very briefly, an API returns data to a user based on a query that was sent to it. The queries take the shape of URLs. In each URL you can specify parameters so as to retrieve different data. Most of the time the API will return the data as a JSON file (I haven&rsquo;t encountered any other formats yet but they do exist) so knowing how to parse them is important. What&rsquo;s cool with Python is that JSON files are <em>exactly</em> like dictionaries.</p><p>Just like a website, an API is hosted on a server, which means that technically it could &ldquo;break&rdquo; if too many people query the API too quickly. For the API there isn&rsquo;t much difference between it sending all of its data or just piece of it. What matters is <em>how many times</em> you interrogate it, not for <em>how much</em>. In our case we may as well interrogate the JCDecaux API on all of the stations for a city and not iteratively for every station (it would be longer and they wouldn&rsquo;t be happy).</p><p>As general politeness it&rsquo;s always a good idea to send a mail to the people who made the API to ask them how robust the API and how regularly queries can be sent to it. Also you should thank them for their awesome work :). Sometimes they indicate all of the information on their website. They also should indicate what each variable corresponds to in the data the API returns because it always also very obvious.</p><h2 id=structure>Structure</h2><p>First of all let&rsquo;s define an elegant structure for the project:</p><pre><code>bikes/
    static/
        js/
            Leaflet.vector-markers.min.js
            Leaflet.vector-markers.js
        data/
            Toulouse.csv
        css/
            Leaflet.vector-markers.css
            Leaflet.vector-markers.css.map
    lib/
        __init__.py
        JCDecaux.py
    templates/
        index.html
    serve.py
    update.py
</code></pre><p>The website will be hosted with flask, with this particular framework all the files related to the website are either in the <code>static</code> folder or in the <code>templates</code> folder.</p><p>The <code>static</code> folder contains the CSS and JavaScript files that are not available online (in this case only the vector markers library that you should have downloaded) plus a CSV file for each city. The idea is that every minute or so (it will be a parameter) we will query the API for a city and replace the CSV file.</p><p>The <code>templates</code> folder regroups the pages of the website. In this case there is only one page. However if we were to add more cities we could just add an HTML file for each city.</p><p>The rest of the files are Python scripts for manipulating the data, I&rsquo;ll get to them now.</p><h2 id=collecting-the-data>Collecting the data</h2><p>JCDecaux provides a very nice API for obtaining data about bikes stations in real time. My idea on the long term was to create a package of scripts for collecting data from different APIs and making it all uniform. In this case the package is called <code>lib</code>. For it to be a real Python package you have to add an empty file called<code>__init__.py</code>. In this file you can create a script called <code>JCDecaux.py</code> and then open it.</p><p>First of all let&rsquo;s import the modules we need to deal with the API (all of them apart from pandas should be available by default with your Python distribution).</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>six.moves.urllib.request</span> <span class=kn>import</span> <span class=n>urlopen</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>json</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>pandas</span> <span class=k>as</span> <span class=nn>pd</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>datetime</span> <span class=kn>import</span> <span class=n>datetime</span>
</span></span></code></pre></div><p>Next let&rsquo;s define some variables.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>key</span> <span class=o>=</span> <span class=s1>&#39;copy/paste your key here!&#39;</span>
</span></span><span class=line><span class=cl><span class=n>base</span> <span class=o>=</span> <span class=s1>&#39;https://api.jcdecaux.com/vls/v1/&#39;</span>
</span></span></code></pre></div><p>Add the key (between quotes) that was given to you after you <a href=https://developer.jcdecaux.com/#/account>registered to JCDecaux</a>. The <code>base</code> variable is the first part of the API, it doesn&rsquo;t change for any query and so it&rsquo;s better to save it to a variable.</p><p>Now let&rsquo;s define a function for interrogating the API.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>query_API</span><span class=p>(</span><span class=n>url</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=c1># Send a query to the API and decode the bytes it returns</span>
</span></span><span class=line><span class=cl>    <span class=n>query</span> <span class=o>=</span> <span class=n>urlopen</span><span class=p>(</span><span class=n>url</span><span class=p>)</span><span class=o>.</span><span class=n>read</span><span class=p>()</span><span class=o>.</span><span class=n>decode</span><span class=p>(</span><span class=s1>&#39;utf-8&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=c1># Return the obtained string as a dictionary</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>json</span><span class=o>.</span><span class=n>loads</span><span class=p>(</span><span class=n>query</span><span class=p>)</span>
</span></span></code></pre></div><p>If you pass into this function a URL, it will return a dictionary containing all the data as a dictionary.</p><p>Next we need a function that interrogates the API for all the stations in a given city.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>stations_list</span><span class=p>(</span><span class=n>city</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>url</span> <span class=o>=</span> <span class=n>base</span> <span class=o>+</span> <span class=s1>&#39;stations/?contract=</span><span class=si>{0}</span><span class=s1>&amp;apiKey=</span><span class=si>{1}</span><span class=s1>&#39;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>city</span><span class=p>,</span> <span class=n>key</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>data</span> <span class=o>=</span> <span class=n>query_API</span><span class=p>(</span><span class=n>url</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>data</span>
</span></span></code></pre></div><p>First we specify the URL to send to the API. In the URL we specify the city name (JCDecaux calls this a <em>contract</em>) and the API key that we stored previously. Then we can use the function we made before to send to URL to the API and get the data we want.</p><p>Here is an example of it actually returns:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;contract_name&#34;</span><span class=p>:</span> <span class=s2>&#34;Toulouse&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;banking&#34;</span><span class=p>:</span> <span class=s2>&#34;True&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;status&#34;</span><span class=p>:</span> <span class=s2>&#34;OPEN&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;bonus&#34;</span><span class=p>:</span> <span class=s2>&#34;False&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;available_bike_stands&#34;</span><span class=p>:</span> <span class=mi>19</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;bike_stands&#34;</span><span class=p>:</span> <span class=mi>19</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;number&#34;</span><span class=p>:</span> <span class=mi>34</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;address&#34;</span><span class=p>:</span> <span class=s2>&#34;2 PETITE RUE SAINT LAZARE&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;position&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;lng&#34;</span><span class=p>:</span> <span class=mf>1.446076879873296</span><span class=p>,</span> <span class=nt>&#34;lat&#34;</span><span class=p>:</span> <span class=mf>43.609650036285025</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;last_update&#34;</span><span class=p>:</span> <span class=mi>1433367891000</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;00034 - SAINT LAZARE&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;available_bikes&#34;</span><span class=p>:</span> <span class=mi>0</span><span class=p>}</span>
</span></span></code></pre></div><p>This is data for one station, the query we send actually returns a <em>list</em> of these.</p><p>You might notice that JCDecaux&rsquo;s API return <em>timestamps</em> for indicating at which time each station was last updated. These can easily be converted to a <code>hh:mm:ss</code> format.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>timestamp_to_ISO</span><span class=p>(</span><span class=n>timestamp</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>moment</span> <span class=o>=</span> <span class=n>datetime</span><span class=o>.</span><span class=n>fromtimestamp</span><span class=p>(</span><span class=n>timestamp</span> <span class=o>/</span> <span class=mi>1000</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>moment</span><span class=o>.</span><span class=n>time</span><span class=p>()</span><span class=o>.</span><span class=n>isoformat</span><span class=p>()</span>
</span></span></code></pre></div><p>Now let&rsquo;s put everything together!</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>information</span><span class=p>(</span><span class=n>city</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=c1># Collect JSON data</span>
</span></span><span class=line><span class=cl>    <span class=n>data</span> <span class=o>=</span> <span class=n>stations_list</span><span class=p>(</span><span class=n>city</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=c1># Convert it to a dataframe</span>
</span></span><span class=line><span class=cl>    <span class=n>df</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>io</span><span class=o>.</span><span class=n>json</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>(</span><span class=n>data</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=c1># The positions are embedded so they have to be extracted</span>
</span></span><span class=line><span class=cl>    <span class=n>positions</span> <span class=o>=</span> <span class=n>df</span><span class=o>.</span><span class=n>position</span><span class=o>.</span><span class=n>apply</span><span class=p>(</span><span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>df</span><span class=p>[</span><span class=s1>&#39;latitude&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>positions</span><span class=p>[</span><span class=s1>&#39;lat&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=n>df</span><span class=p>[</span><span class=s1>&#39;longitude&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>positions</span><span class=p>[</span><span class=s1>&#39;lng&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=c1># Make the timestamps human readable</span>
</span></span><span class=line><span class=cl>    <span class=n>df</span><span class=p>[</span><span class=s1>&#39;last_update&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>df</span><span class=p>[</span><span class=s1>&#39;last_update&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>apply</span><span class=p>(</span><span class=n>timestamp_to_ISO</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>df</span><span class=p>[[</span><span class=s1>&#39;available_bikes&#39;</span><span class=p>,</span> <span class=s1>&#39;last_update&#39;</span><span class=p>,</span> <span class=s1>&#39;name&#39;</span><span class=p>,</span> <span class=s1>&#39;latitude&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>               <span class=s1>&#39;longitude&#39;</span><span class=p>,</span> <span class=s1>&#39;available_bike_stands&#39;</span><span class=p>,</span> <span class=s1>&#39;bike_stands&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>               <span class=s1>&#39;status&#39;</span><span class=p>]]</span>
</span></span></code></pre></div><p>I think the function and the comments speak for themselves but I will go through it in plain english. The function takes a city as a parameter and returns a dataframe. We start by collecting the API as a JSON file with the script we wrote before. As you can see in the example the position of each station is <em>embedded</em>, which means that converting the dictionary to a dataframe doesn&rsquo;t work straight away and puts both into a single column. However as the code shows this isn&rsquo;t difficult to circumvent. The dataframes provided by pandas are really useful, converting all the timestamps to a format comprehensible by humans is a one-liner. with <code>.apply</code>. Finally we decide to only return the columns that we will use, indeed as you can see in the example above the API returns more information than we need.</p><p>We&rsquo;re done with the API interrogation! Now we can create a <code>update.py</code> script in the parent folder and add the following code.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>lib</span> <span class=kn>import</span> <span class=n>JCDecaux</span> <span class=k>as</span> <span class=n>jcd</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>time</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>city</span> <span class=o>=</span> <span class=s1>&#39;Toulouse&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>while</span> <span class=kc>True</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>dataframe</span> <span class=o>=</span> <span class=n>jcd</span><span class=o>.</span><span class=n>information</span><span class=p>(</span><span class=n>city</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>dataframe</span><span class=o>.</span><span class=n>to_csv</span><span class=p>(</span><span class=s1>&#39;static/data/</span><span class=si>{0}</span><span class=s1>.csv&#39;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>city</span><span class=p>),</span> <span class=n>index</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mi>60</span><span class=p>)</span>
</span></span></code></pre></div><p>In this script we use the the code we wrote previously as a <em>module</em>. This makes it really tidy. If we had other scripts for interrogating different APIs we could just import them in this &ldquo;main&rdquo; script and voilÃ . The script itself is not too complicated, we simply loop forever and interrogate the API every 60 seconds (change it as you please). The dataframe we build is saved to <code>static</code> folder which flask will be able to read. The architecture of the project is efficient, indeed instead of just one city we could add an inner <code>for</code> loop the <code>while</code> loop and iterate over a list of cities without having to change the <code>JCDecaux.py</code></p><h2 id=making-a-map>Making a map</h2><p>Let&rsquo;s add a file called <code>index.html</code> to the <code>templates</code> folder, this will contain the map of Toulouse but il will easily be adaptable for other cities.</p><p>First of all let&rsquo;s import all the libraries we will need.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=cp>&lt;!DOCTYPE html&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>html</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>head</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>meta</span> <span class=na>charset</span><span class=o>=</span><span class=s>&#39;utf-8&#39;</span><span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>title</span><span class=p>&gt;</span>Bike stations<span class=p>&lt;/</span><span class=nt>title</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>meta</span> <span class=na>name</span><span class=o>=</span><span class=s>&#39;viewport&#39;</span> <span class=na>content</span><span class=o>=</span><span class=s>&#39;initial-scale=1,maximum-scale=1,user-scalable=no&#39;</span><span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>        <span class=c>&lt;!-- Leaflet JS --&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>script</span> <span class=na>src</span><span class=o>=</span><span class=s>&#39;https://api.tiles.mapbox.com/mapbox.js/v2.1.9/mapbox.js&#39;</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>		<span class=c>&lt;!-- Leaflet CSS --&gt;</span>
</span></span><span class=line><span class=cl>		<span class=p>&lt;</span><span class=nt>link</span> <span class=na>href</span><span class=o>=</span><span class=s>&#39;https://api.tiles.mapbox.com/mapbox.js/v2.1.9/mapbox.css&#39;</span> <span class=na>rel</span><span class=o>=</span><span class=s>&#39;stylesheet&#39;</span><span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>		<span class=c>&lt;!-- Font-awesome --&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>link</span> <span class=na>rel</span><span class=o>=</span><span class=s>&#34;stylesheet&#34;</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=c>&lt;!-- Leaflet vector markers --&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>link</span> <span class=na>rel</span><span class=o>=</span><span class=s>&#34;stylesheet&#34;</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;{{ url_for(&#39;static&#39;, filename=&#39;css/Leaflet.vector-markers.css&#39;) }}&#34;</span><span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>script</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;{{ url_for(&#39;static&#39;, filename=&#39;js/Leaflet.vector-markers.js&#39;) }}&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=c>&lt;!-- Leaflet omnivore --&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>script</span> <span class=na>src</span><span class=o>=</span><span class=s>&#39;https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-omnivore/v0.2.0/leaflet-omnivore.min.js&#39;</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>style</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>            <span class=nt>body</span> <span class=p>{</span> <span class=k>margin</span><span class=p>:</span><span class=mi>0</span><span class=p>;</span> <span class=k>padding</span><span class=p>:</span><span class=mi>0</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=p>#</span><span class=nn>map</span> <span class=p>{</span> <span class=k>position</span><span class=p>:</span><span class=kc>absolute</span><span class=p>;</span> <span class=k>top</span><span class=p>:</span><span class=mi>0</span><span class=p>;</span> <span class=k>bottom</span><span class=p>:</span><span class=mi>0</span><span class=p>;</span> <span class=k>width</span><span class=p>:</span><span class=mi>100</span><span class=kt>%</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;/</span><span class=nt>style</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>head</span><span class=p>&gt;</span>
</span></span></code></pre></div><p>Leaflet is the &ldquo;main&rdquo; library we will use for displaying maps. It&rsquo;s lightweight and has a lot of plugins. Most of the plugins and leaflet itself are available for importing online, in other words you don&rsquo;t need to have as physical files. The downside of this is that the script are <em>slightly</em> lower to load the first time you open the HTML file in your browser. <strong>However</strong> the file will load faster the next times you open it because your browser will <em>remember</em> opening it. In our case only the the vector markers library isn&rsquo;t available online.</p><p>For the sake of showing leaflet&rsquo;s possibilities let&rsquo;s add two plugins.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>body</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=c>&lt;!-- Fullscreen plugin --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>src</span><span class=o>=</span><span class=s>&#39;https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-fullscreen/v0.0.4/Leaflet.fullscreen.min.js&#39;</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>link</span> <span class=na>href</span><span class=o>=</span><span class=s>&#39;https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-fullscreen/v0.0.4/leaflet.fullscreen.css&#39;</span> <span class=na>rel</span><span class=o>=</span><span class=s>&#39;stylesheet&#39;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl><span class=c>&lt;!-- User location plugin --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>src</span><span class=o>=</span><span class=s>&#39;https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-locatecontrol/v0.42.0/L.Control.Locate.min.js&#39;</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>link</span> <span class=na>href</span><span class=o>=</span><span class=s>&#39;https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-locatecontrol/v0.42.0/L.Control.Locate.mapbox.css&#39;</span> <span class=na>rel</span><span class=o>=</span><span class=s>&#39;stylesheet&#39;</span> <span class=p>/&gt;</span>
</span></span></code></pre></div><p>These specific plugins add two buttons to the top-left of the map, one puts the map to fullscreen and the other pinpoints the user&rsquo;s location on the map with a blue circle.</p><p>We create the map by creating a <code>&lt;div></code> object that will cover the whole page.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>div</span> <span class=na>id</span><span class=o>=</span><span class=s>&#39;map&#39;</span><span class=p>&gt;&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span></code></pre></div><p>The rest of the file is JavaScript to put all the libraries together.</p><p>First of all we need a function that returns a color based on the number of bikes or the number of bike stands available. The modern way to do this is to use the HSL standard. To be honest I am no expert in JavaScript or in colors, I found some snippet on StackExchange and adapted it to go from <font color=firebrick>red</font> to <font color=forestgreen>green</font>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=o>&lt;</span><span class=nx>script</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl><span class=c1>// transform a value from 0 to 1 into a color
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>function</span> <span class=nx>getColor</span><span class=p>(</span><span class=nx>value</span><span class=p>){</span>
</span></span><span class=line><span class=cl>	<span class=kd>var</span> <span class=nx>hue</span><span class=o>=</span><span class=p>((</span><span class=mi>1</span><span class=o>-</span><span class=nx>value</span><span class=p>)</span><span class=o>*</span><span class=mi>120</span><span class=p>).</span><span class=nx>toString</span><span class=p>(</span><span class=mi>10</span><span class=p>);</span>
</span></span><span class=line><span class=cl>	<span class=k>return</span> <span class=p>[</span><span class=s2>&#34;hsl(&#34;</span><span class=p>,</span><span class=nx>hue</span><span class=p>,</span><span class=s2>&#34;,80%,60%)&#34;</span><span class=p>].</span><span class=nx>join</span><span class=p>(</span><span class=s2>&#34;&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>Next let&rsquo;s edit the map.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=nx>L</span><span class=p>.</span><span class=nx>mapbox</span><span class=p>.</span><span class=nx>accessToken</span> <span class=o>=</span> <span class=s1>&#39;pk.eyJ1IjoibGVtYXgiLCJhIjoidnNDV1kzNCJ9.iH26jLhEuimYd6vLOO6v1g&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>map</span> <span class=o>=</span> <span class=nx>L</span><span class=p>.</span><span class=nx>mapbox</span><span class=p>.</span><span class=nx>map</span><span class=p>(</span><span class=s1>&#39;map&#39;</span><span class=p>,</span> <span class=s1>&#39;mapbox.emerald&#39;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl><span class=nx>maxZoom</span><span class=o>:</span> <span class=mi>20</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span><span class=line><span class=cl><span class=c1>// initial location
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>map</span><span class=p>.</span><span class=nx>setView</span><span class=p>([</span><span class=mf>43.60426</span><span class=p>,</span> <span class=mf>1.44367</span><span class=p>],</span> <span class=mi>14</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=c1>// add plugins
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>L</span><span class=p>.</span><span class=nx>control</span><span class=p>.</span><span class=nx>fullscreen</span><span class=p>().</span><span class=nx>addTo</span><span class=p>(</span><span class=nx>map</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>L</span><span class=p>.</span><span class=nx>control</span><span class=p>.</span><span class=nx>locate</span><span class=p>().</span><span class=nx>addTo</span><span class=p>(</span><span class=nx>map</span><span class=p>);</span>
</span></span></code></pre></div><p>We start by defining the map and giving the <code>emerald</code> style available on <a href=https://www.mapbox.com>mapbox</a>. On mapbox you can also create your own maps but that&rsquo;s another matter altogether. Then we center it on Toulouse (use google for other cities). Finally we activate the two plugins we imported.</p><p>Now the last piece of puzzle is to convert the CSV files we generate with Python into markers on the map. For this we use omnivore library. omnivore is very smart, you just have to point it to a CSV file containing columns resembling &ldquo;latitude&rdquo; or &ldquo;lat&rdquo; (the same goes for the longitudes) and it will do all the work in the background.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=nx>omnivore</span><span class=p>.</span><span class=nx>csv</span><span class=p>(</span><span class=s2>&#34;{{ url_for(&#39;static&#39;, filename=&#39;assets/files/Toulouse.csv&#39;) }}&#34;</span><span class=p>,</span> <span class=kc>null</span><span class=p>,</span> <span class=nx>L</span><span class=p>.</span><span class=nx>mapbox</span><span class=p>.</span><span class=nx>featureLayer</span><span class=p>())</span>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;ready&#39;</span><span class=p>,</span> <span class=kd>function</span><span class=p>(</span><span class=nx>layer</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl><span class=k>this</span><span class=p>.</span><span class=nx>eachLayer</span><span class=p>(</span><span class=kd>function</span><span class=p>(</span><span class=nx>marker</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>info</span> <span class=o>=</span> <span class=nx>marker</span><span class=p>.</span><span class=nx>toGeoJSON</span><span class=p>().</span><span class=nx>properties</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>bikes</span> <span class=o>=</span> <span class=nx>info</span><span class=p>.</span><span class=nx>available_bikes</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>stands</span> <span class=o>=</span> <span class=nx>info</span><span class=p>.</span><span class=nx>available_bike_stands</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>total</span> <span class=o>=</span> <span class=nx>info</span><span class=p>.</span><span class=nx>bike_stands</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>update</span> <span class=o>=</span> <span class=nx>info</span><span class=p>.</span><span class=nx>last_update</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>icon</span> <span class=o>=</span> <span class=nx>L</span><span class=p>.</span><span class=nx>VectorMarkers</span><span class=p>.</span><span class=nx>icon</span><span class=p>({</span>
</span></span><span class=line><span class=cl>	<span class=nx>icon</span><span class=o>:</span> <span class=s1>&#39;circle&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=nx>markerColor</span><span class=o>:</span> <span class=nx>getColor</span><span class=p>(</span><span class=mi>1</span> <span class=o>-</span> <span class=nx>bikes</span> <span class=o>/</span> <span class=nx>total</span><span class=p>),</span>
</span></span><span class=line><span class=cl>	<span class=nx>iconColor</span><span class=o>:</span> <span class=nx>getColor</span><span class=p>(</span><span class=mi>1</span> <span class=o>-</span> <span class=nx>stands</span> <span class=o>/</span> <span class=nx>total</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl><span class=c1>// change the icons for each point on the map
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>marker</span><span class=p>.</span><span class=nx>setIcon</span><span class=p>(</span><span class=nx>icon</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>// create popup text to display the date, city, and country of the GPS data point
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>var</span> <span class=nx>popupText</span> <span class=o>=</span>
</span></span><span class=line><span class=cl><span class=nx>marker</span><span class=p>.</span><span class=nx>toGeoJSON</span><span class=p>().</span><span class=nx>properties</span><span class=p>.</span><span class=nx>name</span> <span class=o>+</span>
</span></span><span class=line><span class=cl><span class=s1>&#39;&lt;/br&gt;&#39;</span> <span class=o>+</span>
</span></span><span class=line><span class=cl><span class=s1>&#39;&lt;b&gt;&#39;</span> <span class=o>+</span> <span class=nx>bikes</span> <span class=o>+</span> <span class=s1>&#39;&lt;/b&gt;&#39;</span> <span class=o>+</span> <span class=s1>&#39; bike(s) available&#39;</span> <span class=o>+</span>
</span></span><span class=line><span class=cl><span class=s1>&#39;&lt;/br&gt;&#39;</span> <span class=o>+</span>
</span></span><span class=line><span class=cl><span class=s1>&#39;&lt;b&gt;&#39;</span> <span class=o>+</span> <span class=nx>stands</span> <span class=o>+</span> <span class=s1>&#39;&lt;/b&gt;&#39;</span> <span class=o>+</span> <span class=s1>&#39; bike stand(s) available&#39;</span> <span class=o>+</span>
</span></span><span class=line><span class=cl><span class=s1>&#39;&lt;/br&gt;&#39;</span> <span class=o>+</span>
</span></span><span class=line><span class=cl><span class=s1>&#39;Updated @ &#39;</span> <span class=o>+</span> <span class=s1>&#39;&lt;b&gt;&#39;</span> <span class=o>+</span> <span class=nx>update</span> <span class=o>+</span> <span class=s1>&#39;&lt;/b&gt;&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=c1>// bind the popup to each icon
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>marker</span><span class=p>.</span><span class=nx>bindPopup</span><span class=p>(</span><span class=nx>popupText</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nx>addTo</span><span class=p>(</span><span class=nx>map</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=err>/script&gt;</span>
</span></span></code></pre></div><p>The <code>info</code> variable stores the data from all the columns for each row. We define an <code>icon</code> variable where we use the <code>getColor()</code> function defined earlier to color the marker and the circle in the middle of the marker based on the relative number of bikes or bike stands available. Then we tell omnivore that the marker inherits it&rsquo;s graphics from the icon we just created. Finally we create a <code>popupText</code> variable for when the user clicks on a marker and bind it to the marker.</p><p>Don&rsquo;t forget to close the HTML tags :).</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>body</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>html</span><span class=p>&gt;</span>
</span></span></code></pre></div><p>I don&rsquo;t know what you think but I find that leaflet is very neat and the code is comprehensible. I myself had never done any JavaScript and this didn&rsquo;t take me long to pick up.</p><h2 id=running-the-website>Running the website</h2><p>We&rsquo;re nearly done, we just have to run the website thanks to flask. The reason why we can&rsquo;t just open the <code>index.html</code> is because the script has to <em>get</em> data from a folder, and a browser on it&rsquo;s own can&rsquo;t do that. Another way of doing this would be to put everything in the <code>htdocs</code> folder of Apache and navigate to it in the browser, however I find that Apache is annoying to manipulate and sharing code with other people can become annoying.</p><p>Create a <code>serve.py</code> file and add the following code.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>flask</span> <span class=kn>import</span> <span class=n>Flask</span><span class=p>,</span> <span class=n>render_template</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>app</span> <span class=o>=</span> <span class=n>Flask</span><span class=p>(</span><span class=vm>__name__</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@app.route</span><span class=p>(</span><span class=s1>&#39;/&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>index</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>render_template</span><span class=p>(</span><span class=s1>&#39;index.html&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s1>&#39;__main__&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>app</span><span class=o>.</span><span class=n>run</span><span class=p>()</span>
</span></span></code></pre></div><p>The point of this blog post isn&rsquo;t to explain Flask to you, if you want to learn more about it <a href=http://flask.pocoo.org/>visit their website</a>, it&rsquo;s very well made. If you run this script and type <code>localhost:5000</code> in your browser you should see the map!</p><p>Flask really shines here, if I want to send this to one of my friends so he/she can edit it (for example add more maps) he/she won&rsquo;t have to bother with Apache.</p><p>To sum things up, if you want to run the website constantly you have to execute <code>update.py</code> and <code>serve.py</code> without stoping them. To do this properly and also to have a real URL point to the website you will have run all this on a Linux server with daemons. However all this enters another realm and is out of the scope of this post.</p><p>I hope you enjoyed the post.</p></div><script type=text/javascript>var s=document.createElement("script");s.setAttribute("src","https://utteranc.es/client.js"),s.setAttribute("repo","MaxHalford/maxhalford.github.io"),s.setAttribute("issue-term","pathname"),s.setAttribute("crossorigin","anonymous"),s.setAttribute("async",null),s.setAttribute("theme","github-light"),document.body.appendChild(s)</script><div style=display:flex;flex-direction:row;justify-content:center;align-items:center;gap:20px;margin-bottom:30px><div class=do-the-thing><div class=elevator><svg class="sweet-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 100 100" enable-background="new 0 0 100 100" height="100" width="100"><path d="M70 47.5H30c-1.4.0-2.5 1.1-2.5 2.5v40c0 1.4 1.1 2.5 2.5 2.5h40c1.4.0 2.5-1.1 2.5-2.5V50C72.5 48.6 71.4 47.5 70 47.5zm-22.5 40h-5v-25h5v25zm10 0h-5v-25h5v25zm10 0h-5V60c0-1.4-1.1-2.5-2.5-2.5H40c-1.4.0-2.5 1.1-2.5 2.5v27.5h-5v-35h35v35z"/><path d="M50 42.5c1.4.0 2.5-1.1 2.5-2.5V16l5.7 5.7c.5.5 1.1.7 1.8.7s1.3-.2 1.8-.7c1-1 1-2.6.0-3.5l-10-10c-1-1-2.6-1-3.5.0l-10 10c-1 1-1 2.6.0 3.5 1 1 2.6 1 3.5.0l5.7-5.7v24c0 1.4 1.1 2.5 2.5 2.5z"/></svg>Back to the top</div></div><iframe src=https://github.com/sponsors/MaxHalford/button title="Sponsor MaxHalford" height=32 width=114 style=border:0;border-radius:6px></iframe></div><script src=https://cdnjs.cloudflare.com/ajax/libs/elevator.js/1.0.1/elevator.min.js></script>
<script>var elementButton=document.querySelector(".elevator"),elevator=new Elevator({element:elementButton,mainAudio:"/music/elevator.mp3",endAudio:"/music/ding.mp3"})</script><style>.down-arrow{font-size:120px;margin-top:90px;margin-bottom:90px;text-shadow:0 -20px #0c1f31,0 0 #c33329;color:transparent;-webkit-transform:scaleY(.8);-moz-transform:scaleY(.8);transform:scaleY(.8)}.elevator{text-align:center;cursor:pointer;width:140px;margin:auto}.elevator:hover{opacity:.7}.elevator svg{width:40px;height:40px;display:block;margin:auto;margin-bottom:5px}</style></div></div></article><script></script></body></html>