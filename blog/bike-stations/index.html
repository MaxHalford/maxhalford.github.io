<!doctype html><html lang=en><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-63302552-1"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','UA-63302552-1')</script><script async defer data-website-id=6023252a-3a97-470f-b4ee-5082d242bb9a src=https://umami.pourtan.eu/umami.js></script><meta charset=utf-8><meta name=generator content="Hugo 0.82.0"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="Max Halford"><meta property="og:url" content="https://maxhalford.github.io/blog/bike-stations/"><link rel=canonical href=https://maxhalford.github.io/blog/bike-stations/><link rel=icon href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸ¦”</text></svg>"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/maxhalford.github.io\/"},"articleSection":"blog","name":"Visualizing bike stations live data","headline":"Visualizing bike stations live data","description":"Recently some friends and I decided to launch openbikes.co, a website for visualizing (and later on analyzing) urban bike traffic. We have a lot of ideas that we will progressively implement. Anyway, the point is that all of it started with me fiddling about with the JCDecaux API and the leaflet.js library and I would like to share it with you. Shall we?\nPresentation In this post I want to show you the tools and the code to get a fully functional website for visualizing live data.","inLanguage":"en-US","author":"Max Halford","creator":"Max Halford","publisher":"Max Halford","accountablePerson":"Max Halford","copyrightHolder":"Max Halford","copyrightYear":"2015","datePublished":"2015-06-03 00:00:00 \u002b0000 UTC","dateModified":"2015-06-03 00:00:00 \u002b0000 UTC","url":"https:\/\/maxhalford.github.io\/blog\/bike-stations\/","keywords":[]}</script><title>Visualizing bike stations live data - Max Halford</title><meta property="og:title" content="Visualizing bike stations live data - Max Halford"><meta property="og:type" content="article"><meta name=description content="Recently some friends and I decided to launch openbikes.co, a website for visualizing (and later on analyzing) urban bike traffic. We have a lot of ideas that we will progressively implement. Anyway, the point is that all of it started with me fiddling about with the JCDecaux API and the leaflet.js library and I would like to share it with you. Shall we?
Presentation In this post I want to show you the tools and the code to get a fully functional website for visualizing live data."><link rel=stylesheet href=/css/flexboxgrid-6.3.1.min.css><link rel=stylesheet href=/css/github-markdown.min.css><link rel=stylesheet href=/css/highlight/github.css><link rel=stylesheet href=/css/index.css><link href="https://fonts.googleapis.com/css?family=PT+Serif|PT+Sans|Permanent+Marker" rel=stylesheet><script>MathJax={tex:{inlineMath:[['$','$'],['\\(','\\)']],displayMath:[['$$','$$'],['\\[','\\]']],processEscapes:!0,processEnvironments:!0,tags:'ams'},options:{skipHtmlTags:['script','noscript','style','textarea','pre']}},window.addEventListener('load',a=>{document.querySelectorAll('mjx-container').forEach(function(a){a.parentElement.classList+='has-jax'})})</script><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script type=text/javascript id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script></head><body><article class=post id=article><div class="row center-xs" style=text-align:left><div class="col-xs-12 col-sm-10 col-md-7 col-lg-5"><div class=post-header><header><div class="signatures site-title"><a href=/>Max Halford</a></div></header><div class="row end-xs"><div><a class=header-link href=/>Blog</a>
<a class=header-link href=/links/>Links</a>
<a class=header-link href=/bio/>Bio</a></div></div><div class=header-line></div></div><header class=post-header><h1 class=post-title>Visualizing bike stations live data</h1><div class="row post-desc"><div class=col-xs-12><time class=post-date datetime="2015-06-03 00:00:00 UTC">2015-06-03 Â· 13 minute read</time></div></div></header><div class="post-content markdown-body"><p>Recently some friends and I decided to launch <a href=http://openbikes.co/>openbikes.co</a>, a website for visualizing (and later on analyzing) urban bike traffic. We have a lot of ideas that we will progressively implement. Anyway, the point is that all of it started with me fiddling about with the <em>JCDecaux</em> API and the <em>leaflet.js</em> library and I would like to share it with you. Shall we?</p><h2 id=presentation>Presentation</h2><p>In this post I want to show you the tools and the code to get a fully functional website for visualizing live data. In this particular case we will display bike stations in Toulouse, however I will keep the scripts as general as possible so they are easily modifiable for different data. Before starting here is a glimpse of the end result:</p><img class=centered src=/img/blog/bike-stations/bikes.png><p>Pretty neat right? The marker color represents how many bikes are available and the circle in the center of each marker shows how many bike stands are available. In both cases, the <font color=forestgreen>greener</font> the marker the higher the amount (a <font color=firebrick>red</font>) indicator means not a lot. Thus <font color=orange>yellow</font> means that the bike station is &ldquo;balanced&rdquo;. The cool thing is that you can set this up to update every minute or so.</p><h2 id=tools>Tools</h2><p>I&rsquo;ll be doing this in Python (3, but it shouldn&rsquo;t matter). Only two modules are needed: <a href=http://pandas.pydata.org/>pandas</a> (manipulating data frames) and <a href=http://flask.pocoo.org/>flask</a> (making and hosting a website). Both should be very easy to install on any platform as they are extremely popular modules.</p><p><a href=https://github.com/hiasinho/Leaflet.vector-markers>Download the leaflet vector marker library</a> (click on <code>Download ZIP</code> towards the bottom-right). All the other JavaScript libraries are accessible via the internet and don&rsquo;t need downloading.</p><p>Data will be collected from the JCDecaux API, if you don&rsquo;t know what an API is don&rsquo;t worry. However you will have to <a href=https://developer.jcdecaux.com/#/account>obtain a registration key</a> because I cannot give you mine. The reason why most APIs require users to have a registration key is so bots can&rsquo;t overflow their servers and slow/crash them.</p><p>That&rsquo;s it. You might want to use a nice text editor such as <a href=http://www.sublimetext.com/>sublime</a> for the HTML/JavaScript part. Also the markers on the map might not render well for deprecated navigator versions or with Internet Explorer, however everything certainly works with Chrome.</p><h2 id=prior-on-apis>Prior on APIs</h2><p>Very briefly, an API returns data to a user based on a query that was sent to it. The queries take the shape of URLs. In each URL you can specify parameters so as to retrieve different data. Most of the time the API will return the data as a JSON file (I haven&rsquo;t encountered any other formats yet but they do exist) so knowing how to parse them is important. What&rsquo;s cool with Python is that JSON files are <em>exactly</em> like dictionaries.</p><p>Just like a website, an API is hosted on a server, which means that technically it could &ldquo;break&rdquo; if too many people query the API too quickly. For the API there isn&rsquo;t much difference between it sending all of its data or just piece of it. What matters is <em>how many times</em> you interrogate it, not for <em>how much</em>. In our case we may as well interrogate the JCDecaux API on all of the stations for a city and not iteratively for every station (it would be longer and they wouldn&rsquo;t be happy).</p><p>As general politeness it&rsquo;s always a good idea to send a mail to the people who made the API to ask them how robust the API and how regularly queries can be sent to it. Also you should thank them for their awesome work :). Sometimes they indicate all of the information on their website. They also should indicate what each variable corresponds to in the data the API returns because it always also very obvious.</p><h2 id=structure>Structure</h2><p>First of all let&rsquo;s define an elegant structure for the project:</p><pre><code>bikes/
    static/
        js/
            Leaflet.vector-markers.min.js
            Leaflet.vector-markers.js
        data/
            Toulouse.csv
        css/
            Leaflet.vector-markers.css
            Leaflet.vector-markers.css.map
    lib/
        __init__.py
        JCDecaux.py
    templates/
        index.html
    serve.py
    update.py
</code></pre><p>The website will be hosted with flask, with this particular framework all the files related to the website are either in the <code>static</code> folder or in the <code>templates</code> folder.</p><p>The <code>static</code> folder contains the CSS and JavaScript files that are not available online (in this case only the vector markers library that you should have downloaded) plus a CSV file for each city. The idea is that every minute or so (it will be a parameter) we will query the API for a city and replace the CSV file.</p><p>The <code>templates</code> folder regroups the pages of the website. In this case there is only one page. However if we were to add more cities we could just add an HTML file for each city.</p><p>The rest of the files are Python scripts for manipulating the data, I&rsquo;ll get to them now.</p><h2 id=collecting-the-data>Collecting the data</h2><p>JCDecaux provides a very nice API for obtaining data about bikes stations in real time. My idea on the long term was to create a package of scripts for collecting data from different APIs and making it all uniform. In this case the package is called <code>lib</code>. For it to be a real Python package you have to add an empty file called<code>__init__.py</code>. In this file you can create a script called <code>JCDecaux.py</code> and then open it.</p><p>First of all let&rsquo;s import the modules we need to deal with the API (all of them apart from pandas should be available by default with your Python distribution).</p><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=kn>from</span> <span class=nn>six.moves.urllib.request</span> <span class=kn>import</span> <span class=n>urlopen</span>
<span class=kn>import</span> <span class=nn>json</span>
<span class=kn>import</span> <span class=nn>pandas</span> <span class=kn>as</span> <span class=nn>pd</span>
<span class=kn>from</span> <span class=nn>datetime</span> <span class=kn>import</span> <span class=n>datetime</span>
</code></pre></div><p>Next let&rsquo;s define some variables.</p><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=n>key</span> <span class=o>=</span> <span class=s1>&#39;copy/paste your key here!&#39;</span>
<span class=n>base</span> <span class=o>=</span> <span class=s1>&#39;https://api.jcdecaux.com/vls/v1/&#39;</span>
</code></pre></div><p>Add the key (between quotes) that was given to you after you <a href=https://developer.jcdecaux.com/#/account>registered to JCDecaux</a>. The <code>base</code> variable is the first part of the API, it doesn&rsquo;t change for any query and so it&rsquo;s better to save it to a variable.</p><p>Now let&rsquo;s define a function for interrogating the API.</p><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=k>def</span> <span class=nf>query_API</span><span class=p>(</span><span class=n>url</span><span class=p>):</span>
    <span class=c1># Send a query to the API and decode the bytes it returns</span>
    <span class=n>query</span> <span class=o>=</span> <span class=n>urlopen</span><span class=p>(</span><span class=n>url</span><span class=p>)</span><span class=o>.</span><span class=n>read</span><span class=p>()</span><span class=o>.</span><span class=n>decode</span><span class=p>(</span><span class=s1>&#39;utf-8&#39;</span><span class=p>)</span>
    <span class=c1># Return the obtained string as a dictionary</span>
    <span class=k>return</span> <span class=n>json</span><span class=o>.</span><span class=n>loads</span><span class=p>(</span><span class=n>query</span><span class=p>)</span>
</code></pre></div><p>If you pass into this function a URL, it will return a dictionary containing all the data as a dictionary.</p><p>Next we need a function that interrogates the API for all the stations in a given city.</p><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=k>def</span> <span class=nf>stations_list</span><span class=p>(</span><span class=n>city</span><span class=p>):</span>
    <span class=n>url</span> <span class=o>=</span> <span class=n>base</span> <span class=o>+</span> <span class=s1>&#39;stations/?contract={0}&amp;apiKey={1}&#39;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>city</span><span class=p>,</span> <span class=n>key</span><span class=p>)</span>
    <span class=n>data</span> <span class=o>=</span> <span class=n>query_API</span><span class=p>(</span><span class=n>url</span><span class=p>)</span>
    <span class=k>return</span> <span class=n>data</span>
</code></pre></div><p>First we specify the URL to send to the API. In the URL we specify the city name (JCDecaux calls this a <em>contract</em>) and the API key that we stored previously. Then we can use the function we made before to send to URL to the API and get the data we want.</p><p>Here is an example of it actually returns:</p><div class=highlight><pre class=chroma><code class=language-json data-lang=json><span class=p>{</span>
  <span class=nt>&#34;contract_name&#34;</span><span class=p>:</span> <span class=s2>&#34;Toulouse&#34;</span><span class=p>,</span>
  <span class=nt>&#34;banking&#34;</span><span class=p>:</span> <span class=s2>&#34;True&#34;</span><span class=p>,</span>
  <span class=nt>&#34;status&#34;</span><span class=p>:</span> <span class=s2>&#34;OPEN&#34;</span><span class=p>,</span>
  <span class=nt>&#34;bonus&#34;</span><span class=p>:</span> <span class=s2>&#34;False&#34;</span><span class=p>,</span>
  <span class=nt>&#34;available_bike_stands&#34;</span><span class=p>:</span> <span class=mi>19</span><span class=p>,</span>
  <span class=nt>&#34;bike_stands&#34;</span><span class=p>:</span> <span class=mi>19</span><span class=p>,</span>
  <span class=nt>&#34;number&#34;</span><span class=p>:</span> <span class=mi>34</span><span class=p>,</span>
  <span class=nt>&#34;address&#34;</span><span class=p>:</span> <span class=s2>&#34;2 PETITE RUE SAINT LAZARE&#34;</span><span class=p>,</span>
  <span class=nt>&#34;position&#34;</span><span class=p>:</span> <span class=p>{</span>
    <span class=nt>&#34;lng&#34;</span><span class=p>:</span> <span class=mf>1.446076879873296</span><span class=p>,</span> <span class=nt>&#34;lat&#34;</span><span class=p>:</span> <span class=mf>43.609650036285025</span>
  <span class=p>},</span>
  <span class=nt>&#34;last_update&#34;</span><span class=p>:</span> <span class=mi>1433367891000</span><span class=p>,</span>
  <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;00034 - SAINT LAZARE&#34;</span><span class=p>,</span>
  <span class=nt>&#34;available_bikes&#34;</span><span class=p>:</span> <span class=mi>0</span><span class=p>}</span>
</code></pre></div><p>This is data for one station, the query we send actually returns a <em>list</em> of these.</p><p>You might notice that JCDecaux&rsquo;s API return <em>timestamps</em> for indicating at which time each station was last updated. These can easily be converted to a <code>hh:mm:ss</code> format.</p><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=k>def</span> <span class=nf>timestamp_to_ISO</span><span class=p>(</span><span class=n>timestamp</span><span class=p>):</span>
    <span class=n>moment</span> <span class=o>=</span> <span class=n>datetime</span><span class=o>.</span><span class=n>fromtimestamp</span><span class=p>(</span><span class=n>timestamp</span> <span class=o>/</span> <span class=mi>1000</span><span class=p>)</span>
    <span class=k>return</span> <span class=n>moment</span><span class=o>.</span><span class=n>time</span><span class=p>()</span><span class=o>.</span><span class=n>isoformat</span><span class=p>()</span>
</code></pre></div><p>Now let&rsquo;s put everything together!</p><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=k>def</span> <span class=nf>information</span><span class=p>(</span><span class=n>city</span><span class=p>):</span>
    <span class=c1># Collect JSON data</span>
    <span class=n>data</span> <span class=o>=</span> <span class=n>stations_list</span><span class=p>(</span><span class=n>city</span><span class=p>)</span>
    <span class=c1># Convert it to a dataframe</span>
    <span class=n>df</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>io</span><span class=o>.</span><span class=n>json</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>(</span><span class=n>data</span><span class=p>)</span>
    <span class=c1># The positions are embedded so they have to be extracted</span>
    <span class=n>positions</span> <span class=o>=</span> <span class=n>df</span><span class=o>.</span><span class=n>position</span><span class=o>.</span><span class=n>apply</span><span class=p>(</span><span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>)</span>
    <span class=n>df</span><span class=p>[</span><span class=s1>&#39;latitude&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>positions</span><span class=p>[</span><span class=s1>&#39;lat&#39;</span><span class=p>]</span>
    <span class=n>df</span><span class=p>[</span><span class=s1>&#39;longitude&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>positions</span><span class=p>[</span><span class=s1>&#39;lng&#39;</span><span class=p>]</span>
    <span class=c1># Make the timestamps human readable</span>
    <span class=n>df</span><span class=p>[</span><span class=s1>&#39;last_update&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>df</span><span class=p>[</span><span class=s1>&#39;last_update&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>apply</span><span class=p>(</span><span class=n>timestamp_to_ISO</span><span class=p>)</span>
    <span class=k>return</span> <span class=n>df</span><span class=p>[[</span><span class=s1>&#39;available_bikes&#39;</span><span class=p>,</span> <span class=s1>&#39;last_update&#39;</span><span class=p>,</span> <span class=s1>&#39;name&#39;</span><span class=p>,</span> <span class=s1>&#39;latitude&#39;</span><span class=p>,</span>
               <span class=s1>&#39;longitude&#39;</span><span class=p>,</span> <span class=s1>&#39;available_bike_stands&#39;</span><span class=p>,</span> <span class=s1>&#39;bike_stands&#39;</span><span class=p>,</span>
               <span class=s1>&#39;status&#39;</span><span class=p>]]</span>
</code></pre></div><p>I think the function and the comments speak for themselves but I will go through it in plain english. The function takes a city as a parameter and returns a dataframe. We start by collecting the API as a JSON file with the script we wrote before. As you can see in the example the position of each station is <em>embedded</em>, which means that converting the dictionary to a dataframe doesn&rsquo;t work straight away and puts both into a single column. However as the code shows this isn&rsquo;t difficult to circumvent. The dataframes provided by pandas are really useful, converting all the timestamps to a format comprehensible by humans is a one-liner. with <code>.apply</code>. Finally we decide to only return the columns that we will use, indeed as you can see in the example above the API returns more information than we need.</p><p>We&rsquo;re done with the API interrogation! Now we can create a <code>update.py</code> script in the parent folder and add the following code.</p><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=kn>from</span> <span class=nn>lib</span> <span class=kn>import</span> <span class=n>JCDecaux</span> <span class=k>as</span> <span class=n>jcd</span>
<span class=kn>import</span> <span class=nn>time</span>

<span class=n>city</span> <span class=o>=</span> <span class=s1>&#39;Toulouse&#39;</span>

<span class=k>while</span> <span class=bp>True</span><span class=p>:</span>
    <span class=n>dataframe</span> <span class=o>=</span> <span class=n>jcd</span><span class=o>.</span><span class=n>information</span><span class=p>(</span><span class=n>city</span><span class=p>)</span>
    <span class=n>dataframe</span><span class=o>.</span><span class=n>to_csv</span><span class=p>(</span><span class=s1>&#39;static/data/{0}.csv&#39;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>city</span><span class=p>),</span> <span class=n>index</span><span class=o>=</span><span class=bp>False</span><span class=p>)</span>
    <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mi>60</span><span class=p>)</span>
</code></pre></div><p>In this script we use the the code we wrote previously as a <em>module</em>. This makes it really tidy. If we had other scripts for interrogating different APIs we could just import them in this &ldquo;main&rdquo; script and voilÃ . The script itself is not too complicated, we simply loop forever and interrogate the API every 60 seconds (change it as you please). The dataframe we build is saved to <code>static</code> folder which flask will be able to read. The architecture of the project is efficient, indeed instead of just one city we could add an inner <code>for</code> loop the <code>while</code> loop and iterate over a list of cities without having to change the <code>JCDecaux.py</code></p><h2 id=making-a-map>Making a map</h2><p>Let&rsquo;s add a file called <code>index.html</code> to the <code>templates</code> folder, this will contain the map of Toulouse but il will easily be adaptable for other cities.</p><p>First of all let&rsquo;s import all the libraries we will need.</p><div class=highlight><pre class=chroma><code class=language-html data-lang=html><span class=cp>&lt;!DOCTYPE html&gt;</span>
<span class=p>&lt;</span><span class=nt>html</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>head</span><span class=p>&gt;</span>
        <span class=p>&lt;</span><span class=nt>meta</span> <span class=na>charset</span><span class=o>=</span><span class=s>&#39;utf-8&#39;</span><span class=p>/&gt;</span>
        <span class=p>&lt;</span><span class=nt>title</span><span class=p>&gt;</span>Bike stations<span class=p>&lt;/</span><span class=nt>title</span><span class=p>&gt;</span>
        <span class=p>&lt;</span><span class=nt>meta</span> <span class=na>name</span><span class=o>=</span><span class=s>&#39;viewport&#39;</span> <span class=na>content</span><span class=o>=</span><span class=s>&#39;initial-scale=1,maximum-scale=1,user-scalable=no&#39;</span><span class=p>/&gt;</span>
        <span class=c>&lt;!-- Leaflet JS --&gt;</span>
        <span class=p>&lt;</span><span class=nt>script</span> <span class=na>src</span><span class=o>=</span><span class=s>&#39;https://api.tiles.mapbox.com/mapbox.js/v2.1.9/mapbox.js&#39;</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
		<span class=c>&lt;!-- Leaflet CSS --&gt;</span>
		<span class=p>&lt;</span><span class=nt>link</span> <span class=na>href</span><span class=o>=</span><span class=s>&#39;https://api.tiles.mapbox.com/mapbox.js/v2.1.9/mapbox.css&#39;</span> <span class=na>rel</span><span class=o>=</span><span class=s>&#39;stylesheet&#39;</span><span class=p>/&gt;</span>
		<span class=c>&lt;!-- Font-awesome --&gt;</span>
        <span class=p>&lt;</span><span class=nt>link</span> <span class=na>rel</span><span class=o>=</span><span class=s>&#34;stylesheet&#34;</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css&#34;</span><span class=p>&gt;</span>
        <span class=c>&lt;!-- Leaflet vector markers --&gt;</span>
        <span class=p>&lt;</span><span class=nt>link</span> <span class=na>rel</span><span class=o>=</span><span class=s>&#34;stylesheet&#34;</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;{{ url_for(&#39;static&#39;, filename=&#39;css/Leaflet.vector-markers.css&#39;) }}&#34;</span><span class=p>/&gt;</span>
        <span class=p>&lt;</span><span class=nt>script</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;{{ url_for(&#39;static&#39;, filename=&#39;js/Leaflet.vector-markers.js&#39;) }}&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
        <span class=c>&lt;!-- Leaflet omnivore --&gt;</span>
        <span class=p>&lt;</span><span class=nt>script</span> <span class=na>src</span><span class=o>=</span><span class=s>&#39;https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-omnivore/v0.2.0/leaflet-omnivore.min.js&#39;</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
        <span class=p>&lt;</span><span class=nt>style</span><span class=p>&gt;</span>
            <span class=nt>body</span> <span class=p>{</span> <span class=k>margin</span><span class=p>:</span><span class=mi>0</span><span class=p>;</span> <span class=k>padding</span><span class=p>:</span><span class=mi>0</span><span class=p>;</span> <span class=p>}</span>
            <span class=p>#</span><span class=nn>map</span> <span class=p>{</span> <span class=k>position</span><span class=p>:</span><span class=kc>absolute</span><span class=p>;</span> <span class=k>top</span><span class=p>:</span><span class=mi>0</span><span class=p>;</span> <span class=k>bottom</span><span class=p>:</span><span class=mi>0</span><span class=p>;</span> <span class=k>width</span><span class=p>:</span><span class=mi>100</span><span class=kt>%</span><span class=p>;</span> <span class=p>}</span>
        <span class=p>&lt;/</span><span class=nt>style</span><span class=p>&gt;</span>
    <span class=p>&lt;/</span><span class=nt>head</span><span class=p>&gt;</span>
</code></pre></div><p>Leaflet is the &ldquo;main&rdquo; library we will use for displaying maps. It&rsquo;s lightweight and has a lot of plugins. Most of the plugins and leaflet itself are available for importing online, in other words you don&rsquo;t need to have as physical files. The downside of this is that the script are <em>slightly</em> lower to load the first time you open the HTML file in your browser. <strong>However</strong> the file will load faster the next times you open it because your browser will <em>remember</em> opening it. In our case only the the vector markers library isn&rsquo;t available online.</p><p>For the sake of showing leaflet&rsquo;s possibilities let&rsquo;s add two plugins.</p><div class=highlight><pre class=chroma><code class=language-html data-lang=html><span class=p>&lt;</span><span class=nt>body</span><span class=p>&gt;</span>
<span class=c>&lt;!-- Fullscreen plugin --&gt;</span>
<span class=p>&lt;</span><span class=nt>script</span> <span class=na>src</span><span class=o>=</span><span class=s>&#39;https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-fullscreen/v0.0.4/Leaflet.fullscreen.min.js&#39;</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
<span class=p>&lt;</span><span class=nt>link</span> <span class=na>href</span><span class=o>=</span><span class=s>&#39;https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-fullscreen/v0.0.4/leaflet.fullscreen.css&#39;</span> <span class=na>rel</span><span class=o>=</span><span class=s>&#39;stylesheet&#39;</span> <span class=p>/&gt;</span>
<span class=c>&lt;!-- User location plugin --&gt;</span>
<span class=p>&lt;</span><span class=nt>script</span> <span class=na>src</span><span class=o>=</span><span class=s>&#39;https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-locatecontrol/v0.42.0/L.Control.Locate.min.js&#39;</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
<span class=p>&lt;</span><span class=nt>link</span> <span class=na>href</span><span class=o>=</span><span class=s>&#39;https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-locatecontrol/v0.42.0/L.Control.Locate.mapbox.css&#39;</span> <span class=na>rel</span><span class=o>=</span><span class=s>&#39;stylesheet&#39;</span> <span class=p>/&gt;</span>
</code></pre></div><p>These specific plugins add two buttons to the top-left of the map, one puts the map to fullscreen and the other pinpoints the user&rsquo;s location on the map with a blue circle.</p><p>We create the map by creating a <code>&lt;div></code> object that will cover the whole page.</p><div class=highlight><pre class=chroma><code class=language-html data-lang=html><span class=p>&lt;</span><span class=nt>div</span> <span class=na>id</span><span class=o>=</span><span class=s>&#39;map&#39;</span><span class=p>&gt;&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</code></pre></div><p>The rest of the file is JavaScript to put all the libraries together.</p><p>First of all we need a function that returns a color based on the number of bikes or the number of bike stands available. The modern way to do this is to use the HSL standard. To be honest I am no expert in JavaScript or in colors, I found some snippet on StackExchange and adapted it to go from <font color=firebrick>red</font> to <font color=forestgreen>green</font>.</p><div class=highlight><pre class=chroma><code class=language-javascript data-lang=javascript><span class=o>&lt;</span><span class=nx>script</span><span class=o>&gt;</span>
<span class=c1>// transform a value from 0 to 1 into a color
</span><span class=c1></span><span class=kd>function</span> <span class=nx>getColor</span><span class=p>(</span><span class=nx>value</span><span class=p>){</span>
	<span class=kd>var</span> <span class=nx>hue</span><span class=o>=</span><span class=p>((</span><span class=mi>1</span><span class=o>-</span><span class=nx>value</span><span class=p>)</span><span class=o>*</span><span class=mi>120</span><span class=p>).</span><span class=nx>toString</span><span class=p>(</span><span class=mi>10</span><span class=p>);</span>
	<span class=k>return</span> <span class=p>[</span><span class=s2>&#34;hsl(&#34;</span><span class=p>,</span><span class=nx>hue</span><span class=p>,</span><span class=s2>&#34;,80%,60%)&#34;</span><span class=p>].</span><span class=nx>join</span><span class=p>(</span><span class=s2>&#34;&#34;</span><span class=p>);</span>
<span class=p>}</span>
</code></pre></div><p>Next let&rsquo;s edit the map.</p><div class=highlight><pre class=chroma><code class=language-javascript data-lang=javascript><span class=nx>L</span><span class=p>.</span><span class=nx>mapbox</span><span class=p>.</span><span class=nx>accessToken</span> <span class=o>=</span> <span class=s1>&#39;pk.eyJ1IjoibGVtYXgiLCJhIjoidnNDV1kzNCJ9.iH26jLhEuimYd6vLOO6v1g&#39;</span><span class=p>;</span>
<span class=kd>var</span> <span class=nx>map</span> <span class=o>=</span> <span class=nx>L</span><span class=p>.</span><span class=nx>mapbox</span><span class=p>.</span><span class=nx>map</span><span class=p>(</span><span class=s1>&#39;map&#39;</span><span class=p>,</span> <span class=s1>&#39;mapbox.emerald&#39;</span><span class=p>,</span> <span class=p>{</span>
<span class=nx>maxZoom</span><span class=o>:</span> <span class=mi>20</span>
<span class=p>})</span>
<span class=c1>// initial location
</span><span class=c1></span><span class=nx>map</span><span class=p>.</span><span class=nx>setView</span><span class=p>([</span><span class=mf>43.60426</span><span class=p>,</span> <span class=mf>1.44367</span><span class=p>],</span> <span class=mi>14</span><span class=p>);</span>
<span class=c1>// add plugins
</span><span class=c1></span><span class=nx>L</span><span class=p>.</span><span class=nx>control</span><span class=p>.</span><span class=nx>fullscreen</span><span class=p>().</span><span class=nx>addTo</span><span class=p>(</span><span class=nx>map</span><span class=p>);</span>
<span class=nx>L</span><span class=p>.</span><span class=nx>control</span><span class=p>.</span><span class=nx>locate</span><span class=p>().</span><span class=nx>addTo</span><span class=p>(</span><span class=nx>map</span><span class=p>);</span>
</code></pre></div><p>We start by defining the map and giving the <code>emerald</code> style available on <a href=https://www.mapbox.com>mapbox</a>. On mapbox you can also create your own maps but that&rsquo;s another matter altogether. Then we center it on Toulouse (use google for other cities). Finally we activate the two plugins we imported.</p><p>Now the last piece of puzzle is to convert the CSV files we generate with Python into markers on the map. For this we use omnivore library. omnivore is very smart, you just have to point it to a CSV file containing columns resembling &ldquo;latitude&rdquo; or &ldquo;lat&rdquo; (the same goes for the longitudes) and it will do all the work in the background.</p><div class=highlight><pre class=chroma><code class=language-javascript data-lang=javascript><span class=nx>omnivore</span><span class=p>.</span><span class=nx>csv</span><span class=p>(</span><span class=s2>&#34;{{ url_for(&#39;static&#39;, filename=&#39;assets/files/Toulouse.csv&#39;) }}&#34;</span><span class=p>,</span> <span class=kc>null</span><span class=p>,</span> <span class=nx>L</span><span class=p>.</span><span class=nx>mapbox</span><span class=p>.</span><span class=nx>featureLayer</span><span class=p>())</span>
<span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;ready&#39;</span><span class=p>,</span> <span class=kd>function</span><span class=p>(</span><span class=nx>layer</span><span class=p>)</span> <span class=p>{</span>
<span class=k>this</span><span class=p>.</span><span class=nx>eachLayer</span><span class=p>(</span><span class=kd>function</span><span class=p>(</span><span class=nx>marker</span><span class=p>)</span> <span class=p>{</span>
<span class=kd>var</span> <span class=nx>info</span> <span class=o>=</span> <span class=nx>marker</span><span class=p>.</span><span class=nx>toGeoJSON</span><span class=p>().</span><span class=nx>properties</span>
<span class=kd>var</span> <span class=nx>bikes</span> <span class=o>=</span> <span class=nx>info</span><span class=p>.</span><span class=nx>available_bikes</span>
<span class=kd>var</span> <span class=nx>stands</span> <span class=o>=</span> <span class=nx>info</span><span class=p>.</span><span class=nx>available_bike_stands</span>
<span class=kd>var</span> <span class=nx>total</span> <span class=o>=</span> <span class=nx>info</span><span class=p>.</span><span class=nx>bike_stands</span>
<span class=kd>var</span> <span class=nx>update</span> <span class=o>=</span> <span class=nx>info</span><span class=p>.</span><span class=nx>last_update</span>
<span class=kd>var</span> <span class=nx>icon</span> <span class=o>=</span> <span class=nx>L</span><span class=p>.</span><span class=nx>VectorMarkers</span><span class=p>.</span><span class=nx>icon</span><span class=p>({</span>
	<span class=nx>icon</span><span class=o>:</span> <span class=s1>&#39;circle&#39;</span><span class=p>,</span>
	<span class=nx>markerColor</span><span class=o>:</span> <span class=nx>getColor</span><span class=p>(</span><span class=mi>1</span> <span class=o>-</span> <span class=nx>bikes</span> <span class=o>/</span> <span class=nx>total</span><span class=p>),</span>
	<span class=nx>iconColor</span><span class=o>:</span> <span class=nx>getColor</span><span class=p>(</span><span class=mi>1</span> <span class=o>-</span> <span class=nx>stands</span> <span class=o>/</span> <span class=nx>total</span><span class=p>)</span>
<span class=p>});</span>
<span class=c1>// change the icons for each point on the map
</span><span class=c1></span><span class=nx>marker</span><span class=p>.</span><span class=nx>setIcon</span><span class=p>(</span><span class=nx>icon</span><span class=p>)</span>
<span class=c1>// create popup text to display the date, city, and country of the GPS data point
</span><span class=c1></span><span class=kd>var</span> <span class=nx>popupText</span> <span class=o>=</span>
<span class=nx>marker</span><span class=p>.</span><span class=nx>toGeoJSON</span><span class=p>().</span><span class=nx>properties</span><span class=p>.</span><span class=nx>name</span> <span class=o>+</span>
<span class=s1>&#39;&lt;/br&gt;&#39;</span> <span class=o>+</span>
<span class=s1>&#39;&lt;b&gt;&#39;</span> <span class=o>+</span> <span class=nx>bikes</span> <span class=o>+</span> <span class=s1>&#39;&lt;/b&gt;&#39;</span> <span class=o>+</span> <span class=s1>&#39; bike(s) available&#39;</span> <span class=o>+</span>
<span class=s1>&#39;&lt;/br&gt;&#39;</span> <span class=o>+</span>
<span class=s1>&#39;&lt;b&gt;&#39;</span> <span class=o>+</span> <span class=nx>stands</span> <span class=o>+</span> <span class=s1>&#39;&lt;/b&gt;&#39;</span> <span class=o>+</span> <span class=s1>&#39; bike stand(s) available&#39;</span> <span class=o>+</span>
<span class=s1>&#39;&lt;/br&gt;&#39;</span> <span class=o>+</span>
<span class=s1>&#39;Updated @ &#39;</span> <span class=o>+</span> <span class=s1>&#39;&lt;b&gt;&#39;</span> <span class=o>+</span> <span class=nx>update</span> <span class=o>+</span> <span class=s1>&#39;&lt;/b&gt;&#39;</span><span class=p>;</span>
<span class=c1>// bind the popup to each icon
</span><span class=c1></span><span class=nx>marker</span><span class=p>.</span><span class=nx>bindPopup</span><span class=p>(</span><span class=nx>popupText</span><span class=p>);</span>
<span class=p>});</span>
<span class=p>})</span>
<span class=p>.</span><span class=nx>addTo</span><span class=p>(</span><span class=nx>map</span><span class=p>);</span>
<span class=o>&lt;</span><span class=err>/script&gt;</span>
</code></pre></div><p>The <code>info</code> variable stores the data from all the columns for each row. We define an <code>icon</code> variable where we use the <code>getColor()</code> function defined earlier to color the marker and the circle in the middle of the marker based on the relative number of bikes or bike stands available. Then we tell omnivore that the marker inherits it&rsquo;s graphics from the icon we just created. Finally we create a <code>popupText</code> variable for when the user clicks on a marker and bind it to the marker.</p><p>Don&rsquo;t forget to close the HTML tags :).</p><div class=highlight><pre class=chroma><code class=language-html data-lang=html><span class=p>&lt;/</span><span class=nt>body</span><span class=p>&gt;</span>
<span class=p>&lt;/</span><span class=nt>html</span><span class=p>&gt;</span>
</code></pre></div><p>I don&rsquo;t know what you think but I find that leaflet is very neat and the code is comprehensible. I myself had never done any JavaScript and this didn&rsquo;t take me long to pick up.</p><h2 id=running-the-website>Running the website</h2><p>We&rsquo;re nearly done, we just have to run the website thanks to flask. The reason why we can&rsquo;t just open the <code>index.html</code> is because the script has to <em>get</em> data from a folder, and a browser on it&rsquo;s own can&rsquo;t do that. Another way of doing this would be to put everything in the <code>htdocs</code> folder of Apache and navigate to it in the browser, however I find that Apache is annoying to manipulate and sharing code with other people can become annoying.</p><p>Create a <code>serve.py</code> file and add the following code.</p><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=kn>from</span> <span class=nn>flask</span> <span class=kn>import</span> <span class=n>Flask</span><span class=p>,</span> <span class=n>render_template</span>

<span class=n>app</span> <span class=o>=</span> <span class=n>Flask</span><span class=p>(</span><span class=vm>__name__</span><span class=p>)</span>

<span class=nd>@app.route</span><span class=p>(</span><span class=s1>&#39;/&#39;</span><span class=p>)</span>
<span class=k>def</span> <span class=nf>index</span><span class=p>():</span>
    <span class=k>return</span> <span class=n>render_template</span><span class=p>(</span><span class=s1>&#39;index.html&#39;</span><span class=p>)</span>

<span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s1>&#39;__main__&#39;</span><span class=p>:</span>
    <span class=n>app</span><span class=o>.</span><span class=n>run</span><span class=p>()</span>
</code></pre></div><p>The point of this blog post isn&rsquo;t to explain Flask to you, if you want to learn more about it <a href=http://flask.pocoo.org/>visit their website</a>, it&rsquo;s very well made. If you run this script and type <code>localhost:5000</code> in your browser you should see the map!</p><p>Flask really shines here, if I want to send this to one of my friends so he/she can edit it (for example add more maps) he/she won&rsquo;t have to bother with Apache.</p><p>To sum things up, if you want to run the website constantly you have to execute <code>update.py</code> and <code>serve.py</code> without stoping them. To do this properly and also to have a real URL point to the website you will have run all this on a Linux server with daemons. However all this enters another realm and is out of the scope of this post.</p><p>I hope you enjoyed the post.</p></div><script type=text/javascript>var s=document.createElement('script');s.setAttribute('src','https://utteranc.es/client.js'),s.setAttribute('repo','MaxHalford/maxhalford.github.io'),s.setAttribute('issue-term','pathname'),s.setAttribute('crossorigin','anonymous'),s.setAttribute('async',null),s.setAttribute('theme','github-light'),document.body.appendChild(s)</script><div class=footer><div class=do-the-thing><div class=elevator><svg class="sweet-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 100 100" enable-background="new 0 0 100 100" height="100" width="100"><path d="M70 47.5H30c-1.4.0-2.5 1.1-2.5 2.5v40c0 1.4 1.1 2.5 2.5 2.5h40c1.4.0 2.5-1.1 2.5-2.5V50C72.5 48.6 71.4 47.5 70 47.5zm-22.5 40h-5v-25h5v25zm10 0h-5v-25h5v25zm10 0h-5V60c0-1.4-1.1-2.5-2.5-2.5H40c-1.4.0-2.5 1.1-2.5 2.5v27.5h-5v-35h35v35z"/><path d="M50 42.5c1.4.0 2.5-1.1 2.5-2.5V16l5.7 5.7c.5.5 1.1.7 1.8.7s1.3-.2 1.8-.7c1-1 1-2.6.0-3.5l-10-10c-1-1-2.6-1-3.5.0l-10 10c-1 1-1 2.6.0 3.5 1 1 2.6 1 3.5.0l5.7-5.7v24c0 1.4 1.1 2.5 2.5 2.5z"/></svg>Back to top</div></div></div><script src=https://cdnjs.cloudflare.com/ajax/libs/elevator.js/1.0.0/elevator.min.js></script><script>var elementButton=document.querySelector('.elevator'),elevator=new Elevator({element:elementButton,mainAudio:'/music/elevator.mp3',endAudio:'/music/ding.mp3'})</script><style>.down-arrow{font-size:120px;margin-top:90px;margin-bottom:90px;text-shadow:0 -20px #0c1f31,0 0 #c33329;color:transparent;-webkit-transform:scaleY(.8);-moz-transform:scaleY(.8);transform:scaleY(.8)}.elevator{text-align:center;cursor:pointer;width:140px;margin:auto}.elevator:hover{opacity:.7}.elevator svg{width:40px;height:40px;display:block;margin:auto;margin-bottom:5px}</style><div class=site-footer><div class=site-footer-item><a href=https://github.com/MaxHalford><span class=inline-svg><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.414"><path fill="currentcolor" d="M8 0C3.58.0.0 3.582.0 8c0 3.535 2.292 6.533 5.47 7.59.4.075.547-.172.547-.385.0-.19-.007-.693-.01-1.36-2.226.483-2.695-1.073-2.695-1.073-.364-.924-.89-1.17-.89-1.17-.725-.496.056-.486.056-.486.803.056 1.225.824 1.225.824.714 1.223 1.873.87 2.33.665.072-.517.278-.87.507-1.07-1.777-.2-3.644-.888-3.644-3.953.0-.873.31-1.587.823-2.147-.09-.202-.36-1.015.07-2.117.0.0.67-.215 2.2.82.64-.178 1.32-.266 2-.27.68.004 1.36.092 2 .27 1.52-1.035 2.19-.82 2.19-.82.43 1.102.16 1.915.08 2.117.51.56.82 1.274.82 2.147.0 3.073-1.87 3.75-3.65 3.947.28.24.54.73.54 1.48.0 1.07-.01 1.93-.01 2.19.0.21.14.46.55.38C13.71 14.53 16 11.53 16 8c0-4.418-3.582-8-8-8"/></svg></span></a></div><div class=site-footer-item><a href=https://linkedin.com/in/maxhalford><span class=inline-svg><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.414"><path fill="currentcolor" d="M13.632 13.635h-2.37V9.922c0-.886-.018-2.025-1.234-2.025-1.235.0-1.424.964-1.424 1.96v3.778h-2.37V6H8.51v1.04h.03c.318-.6 1.092-1.233 2.247-1.233 2.4.0 2.845 1.58 2.845 3.637v4.188zM3.558 4.955c-.762.0-1.376-.617-1.376-1.377.0-.758.614-1.375 1.376-1.375.76.0 1.376.617 1.376 1.375.0.76-.617 1.377-1.376 1.377zm1.188 8.68H2.37V6h2.376v7.635zM14.816.0H1.18C.528.0.0.516.0 1.153v13.694C0 15.484.528 16 1.18 16h13.635c.652.0 1.185-.516 1.185-1.153V1.153C16 .516 15.467.0 14.815.0z" fill-rule="nonzero"/></svg></span></a></div><div class=site-footer-item><a href=https://twitter.com/halford_max><span class=inline-svg><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.414"><path fill="currentcolor" d="M16 3.038c-.59.26-1.22.437-1.885.517.677-.407 1.198-1.05 1.443-1.816-.634.37-1.337.64-2.085.79-.598-.64-1.45-1.04-2.396-1.04-1.812.0-3.282 1.47-3.282 3.28.0.26.03.51.085.75-2.728-.13-5.147-1.44-6.766-3.42C.83 2.58.67 3.14.67 3.75c0 1.14.58 2.143 1.46 2.732-.538-.017-1.045-.165-1.487-.41v.04c0 1.59 1.13 2.918 2.633 3.22-.276.074-.566.114-.865.114-.21.0-.41-.02-.61-.058.42 1.304 1.63 2.253 3.07 2.28-1.12.88-2.54 1.404-4.07 1.404-.26.0-.52-.015-.78-.045 1.46.93 3.18 1.474 5.04 1.474 6.04.0 9.34-5 9.34-9.33.0-.14.0-.28-.01-.42.64-.46 1.2-1.04 1.64-1.7z" fill-rule="nonzero"/></svg></span></a></div><div class=site-footer-item><a href=https://kaggle.com/maxhalford><span class=inline-svg><svg role="img" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><title>Kaggle icon</title><path fill="currentcolor" d="M18.825 23.859c-.022.092-.117.141-.281.141h-3.139c-.187.0-.351-.082-.492-.248l-5.178-6.589-1.448 1.374v5.111c0 .235-.117.352-.351.352H5.505c-.236.0-.354-.117-.354-.352V.353c0-.233.118-.353.354-.353h2.431c.234.0.351.12.351.353v14.343l6.203-6.272c.165-.165.33-.246.495-.246h3.239c.144.0.236.06.285.18.046.149.034.255-.036.315l-6.555 6.344 6.836 8.507c.095.104.117.208.07.358"/></svg></span></a></div><div class=site-footer-item><a href="https://scholar.google.com/citations?user=erRNNi0AAAAJ&hl=en"><span class=inline-svg><svg viewBox="0 0 1755 1755" xmlns="http://www.w3.org/2000/svg"><path fill="currentcolor" transform="translate(0 1610) scale(1 -1)" d="M896.76 1130.189c-27.618 30.838-59.618 46.19-95.802 46.19-40.952.0-72.382-14.738-94.288-44.15-21.906-29.322-32.864-64.848-32.864-106.584.0-35.548 5.998-71.738 18-108.64 11.958-36.886 31.524-69.814 58.954-98.838 27.334-29.096 59.144-43.616 95.284-43.616 40.288.0 71.76 13.502 94.332 40.492 22.476 26.954 33.756 60.98 33.756 101.962.0 34.904-5.954 71.454-17.906 109.664-11.894 38.262-31.752 72.784-59.466 103.52zm762.098 382.384c-64.358 64.424-141.86 96.57-232.572 96.57H329.144c-90.712.0-168.14-32.146-232.572-96.57-64.424-64.286-96.57-141.86-96.57-232.572V182.859c0-90.712 32.146-168.288 96.57-232.712 64.432-64.146 142-96.432 232.572-96.432h1097.142c90.712.0 168.214 32.286 232.572 96.57 64.432 64.432 96.644 141.86 96.644 232.572v1097.142c0 90.712-32.22 168.288-96.644 232.572zM1297.81 1154.159V762.033c0-18.154-14.856-33.016-33.016-33.016h-12.156c-18.162.0-33.016 14.856-33.016 33.016v392.126c0 16.12-2.34 29.578 20.188 32.41v52.172l-173.43-142.24c2.004-3.716 3.906-6.092 5.712-9.208 15.242-26.976 23.004-60.526 23.004-101.53.0-31.43-5.238-59.662-15.858-84.598-10.57-24.928-23.428-45.29-38.43-60.972-15.002-15.74-30.048-30.128-45.092-43.074-15.046-12.976-27.904-26.506-38.436-40.55-10.614-14-15.894-28.474-15.894-43.476.0-15.024 6.854-30.288 20.524-45.67 13.62-15.426 30.376-30.376 50.19-45.144 19.85-14.666 39.658-30.946 59.472-48.662 19.858-17.694 36.52-40.456 50.14-68.096 13.722-27.744 20.568-58.288 20.568-91.86.0-44.288-11.294-84.282-33.806-119.882-22.58-35.446-51.998-63.73-88.144-84.472-36.242-20.882-75-36.6-116.334-47.214-41.42-10.518-82.52-15.806-123.568-15.806-25.908.0-52.048 1.996-78.336 6.1-26.382 4.096-52.81 11.33-79.426 21.526-26.668 10.262-50.286 22.864-70.758 37.998-20.524 14.98-37.046 34.312-49.716 57.856-12.668 23.552-18.958 50.022-18.958 79.426.0 34.882 9.714 67.24 29.192 97.404 19.478 29.944 45.282 54.952 77.378 74.76 55.998 34.838 143.858 56.364 263.432 64.498-27.334 34.172-41.048 66.334-41.048 96.432.0 17.122 4.476 35.474 13.334 55.288-14.284-1.996-28.994-3.124-44.002-3.124-64.234.0-118.476 20.882-162.524 62.932-44.046 41.976-66.048 94.522-66.048 158.048.0 6.642.19 12.492.672 18.974H292.574l393.618 342.17h651.856l-60.24-47.024v-82.996c22.368-2.874 20.004-16.318 20.004-32.394zM900.382 544.929c-7.52 1.36-18.088 2.122-31.708 2.122-29.382.0-58.288-2.596-86.666-7.782-28.38-5.046-56.378-13.568-83.998-25.592-27.722-11.952-50.096-29.528-67.146-52.766-17.144-23.208-25.666-50.542-25.666-81.994.0-29.974 7.52-56.714 22.572-80.004 15.002-23.142 34.808-41.26 59.428-54.236 24.62-12.998 50.432-22.814 77.378-29.264 26.998-6.408 54.476-9.736 82.476-9.736 55.376.0 103.05 12.47 143.046 37.406 39.906 24.928 59.904 63.422 59.904 115.382.0 10.928-1.522 21.686-4.528 32.19-3.138 10.62-6.24 19.712-9.282 27.26-3.05 7.41-8.858 16.332-17.43 26.616-8.522 10.314-15.046 17.934-19.434 23.004-4.476 5.238-12.852 12.712-25.19 22.594-12.236 9.926-20.048 16.114-23.522 18.402-3.43 2.406-12.332 8.908-26.668 19.456-14.328 10.634-22.184 16.274-23.566 16.94z"/></svg></span></a></div><div class=site-footer-item><a href=/files/resume_max_halford.pdf><span class=inline-svg><svg id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 392.533 392.533" style="enable-background:new 0 0 392.533 392.533"><g><g><path fill="currentcolor" d="M292.396 324.849H99.879c-6.012.0-10.925 4.848-10.925 10.925.0 6.012 4.849 10.925 10.925 10.925h192.582c6.012.0 10.925-4.849 10.925-10.925C303.321 329.697 298.473 324.849 292.396 324.849z"/></g></g><g><g><path fill="currentcolor" d="M292.396 277.01H99.879c-6.012.0-10.925 4.848-10.925 10.925.0 6.012 4.849 10.925 10.925 10.925h192.582c6.012.0 10.925-4.849 10.925-10.925C303.321 281.859 298.473 277.01 292.396 277.01z"/></g></g><g><g><path fill="currentcolor" d="M196.137 45.834c-25.859.0-46.998 21.075-46.998 46.998.0 25.859 21.139 46.933 46.998 46.933s46.998-21.075 46.998-46.998-21.139-46.933-46.998-46.933zm0 72.017c-13.77.0-25.083-11.313-25.083-25.083s11.248-25.083 25.083-25.083 25.083 11.313 25.083 25.083c0 13.769-11.313 25.083-25.083 25.083z"/></g></g><g><g><path fill="currentcolor" d="M258.521 163.362c-39.887-15.515-84.752-15.515-124.638.0-13.059 5.107-21.786 18.101-21.786 32.388v44.347c-.065 6.012 4.849 10.925 10.861 10.925h146.424c6.012.0 10.925-4.848 10.925-10.925V195.75C280.307 181.463 271.58 168.469 258.521 163.362zm0 65.874H133.883v-33.422c0-5.301 3.168-10.214 7.887-12.024 34.844-13.511 74.02-13.511 108.865.0 4.719 1.875 7.887 6.659 7.887 12.024v33.422z"/></g></g><g><g><path fill="currentcolor" d="M313.083.0H131.491c-8.404.0-16.291 3.232-22.238 9.18L57.018 61.414c-5.947 5.948-9.18 13.834-9.18 22.238v277.333c0 17.39 14.158 31.547 31.547 31.547h233.762c17.39.0 31.547-14.158 31.547-31.547V31.547C344.501 14.158 330.343.0 313.083.0zM112.032 37.236v27.022H85.01l27.022-27.022zm210.683 79.58h-40.598c-6.012.0-10.925 4.849-10.925 10.925.0 6.012 4.848 10.925 10.925 10.925h40.598v19.394h-14.869c-6.012.0-10.925 4.848-10.925 10.925.0 6.012 4.849 10.925 10.925 10.925h14.869v181.139c0 5.366-4.331 9.697-9.632 9.697H79.192c-5.301.0-9.632-4.331-9.632-9.632V86.044h53.398c6.012.0 10.925-4.848 10.925-10.925V21.721h179.2c5.301.0 9.632 4.331 9.632 9.632v85.463z"/></g></g><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/></svg></span></a></div><div class=site-footer-item><a href=https://play.spotify.com/user/1166811350><span class=inline-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 168 168"><path fill="currentcolor" d="m83.996.277C37.747.277.253 37.77.253 84.019c0 46.251 37.494 83.741 83.743 83.741 46.254.0 83.744-37.49 83.744-83.741.0-46.246-37.49-83.738-83.745-83.738l.001-.004zm38.404 120.78c-1.5 2.46-4.72 3.24-7.18 1.73-19.662-12.01-44.414-14.73-73.564-8.07-2.809.64-5.609-1.12-6.249-3.93-.643-2.81 1.11-5.61 3.926-6.25 31.9-7.291 59.263-4.15 81.337 9.34 2.46 1.51 3.24 4.72 1.73 7.18zm10.25-22.805c-1.89 3.075-5.91 4.045-8.98 2.155-22.51-13.839-56.823-17.846-83.448-9.764-3.453 1.043-7.1-.903-8.148-4.35-1.04-3.453.907-7.093 4.354-8.143 30.413-9.228 68.222-4.758 94.072 11.127 3.07 1.89 4.04 5.91 2.15 8.976v-.001zm.88-23.744c-26.99-16.031-71.52-17.505-97.289-9.684-4.138 1.255-8.514-1.081-9.768-5.219-1.254-4.14 1.08-8.513 5.221-9.771 29.581-8.98 78.756-7.245 109.83 11.202 3.73 2.209 4.95 7.016 2.74 10.733-2.2 3.722-7.02 4.949-10.73 2.739z"/></svg></span></a></div><div class=site-footer-item><a href=mailto:maxhalford25@gmail.com><span class=inline-svg><svg viewBox="0 0 15 20" xmlns="http://www.w3.org/2000/svg"><title>mail</title><path fill="currentcolor" d="M0 4v8c0 .55.45 1 1 1h12c.55.0 1-.45 1-1V4c0-.55-.45-1-1-1H1c-.55.0-1 .45-1 1zm13 0L7 9 1 4h12zM1 5.5l4 3-4 3v-6zM2 12l3.5-3L7 10.5 8.5 9l3.5 3H2zm11-.5-4-3 4-3v6z" fill="#000" fill-rule="evenodd"/></svg></span></a></div><div class=site-footer-item><a href=/index.xml><span class=inline-svg><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.414"><path fill="currentcolor" d="M12.8 16C12.8 8.978 7.022 3.2.0 3.2V0c8.777.0 16 7.223 16 16h-3.2zM2.194 11.61c1.21.0 2.195.985 2.195 2.196.0 1.21-.99 2.194-2.2 2.194C.98 16 0 15.017.0 13.806c0-1.21.983-2.195 2.194-2.195zM10.606 16h-3.11c0-4.113-3.383-7.497-7.496-7.497v-3.11c5.818.0 10.606 4.79 10.606 10.607z"/></svg></span></a></div></div></div></div></article><script></script></body></html>