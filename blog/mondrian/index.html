<!doctype html><html lang=en><head><script defer src=https://unpkg.com/@tinybirdco/flock.js data-host=https://api.tinybird.co data-token=p.eyJ1IjogImMwMjJhMjg1LWJmY2YtNDc0OC1hYzczLTJhMDQ1Njk3NTI0YyIsICJpZCI6ICIzNjc3NjQ3Ny04MTE2LTRmYWQtYjcwMy1iZmM3YjMwZGJjMjMifQ.A0vHm-VWbXG6uBFZiwuspN_AyfSYNrdZE3IgwgWSt4g></script><meta charset=utf-8><meta name=generator content="Hugo 0.121.1"><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="Max Halford"><meta property="og:url" content="https://maxhalford.github.io/blog/mondrian/"><link rel=canonical href=https://maxhalford.github.io/blog/mondrian/><meta property="og:title" content="Grid paintings Ã  la Mondrian with JavaScript"><meta property="og:description" content="I was at a laundrette today and had just finished my book so I had some time to kill. Naturally I devised an algorithm for generating drawings that would resemble the grid-like paintings that Piet Mondrian made famous. With the benefit of hindsight I guess I could indulge in saner activities while waiting for my laundry to dry!
I went through different ideas but in the end I settled on a recursive approach."><meta property="og:type" content="article"><meta property="og:url" content="https://maxhalford.github.io/blog/mondrian/"><meta property="og:image" content="https://maxhalford.github.io/img/belle-ile.jpg"><meta property="article:section" content="blog"><meta property="article:published_time" content="2017-03-04T00:00:00+00:00"><meta property="article:modified_time" content="2017-03-04T00:00:00+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://maxhalford.github.io/img/belle-ile.jpg"><meta name=twitter:title content="Grid paintings Ã  la Mondrian with JavaScript"><meta name=twitter:description content="I was at a laundrette today and had just finished my book so I had some time to kill. Naturally I devised an algorithm for generating drawings that would resemble the grid-like paintings that Piet Mondrian made famous. With the benefit of hindsight I guess I could indulge in saner activities while waiting for my laundry to dry!
I went through different ideas but in the end I settled on a recursive approach."><link rel=icon href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸ¦”</text></svg>"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/maxhalford.github.io\/"},"articleSection":"blog","name":"Grid paintings Ã  la Mondrian with JavaScript","headline":"Grid paintings Ã  la Mondrian with JavaScript","description":"I was at a laundrette today and had just finished my book so I had some time to kill. Naturally I devised an algorithm for generating drawings that would resemble the grid-like paintings that Piet Mondrian made famous. With the benefit of hindsight I guess I could indulge in saner activities while waiting for my laundry to dry!\nI went through different ideas but in the end I settled on a recursive approach.","inLanguage":"en-US","author":"Max Halford","creator":"Max Halford","publisher":"Max Halford","accountablePerson":"Max Halford","copyrightHolder":"Max Halford","copyrightYear":"2017","datePublished":"2017-03-04 00:00:00 \u002b0000 UTC","dateModified":"2017-03-04 00:00:00 \u002b0000 UTC","url":"https:\/\/maxhalford.github.io\/blog\/mondrian\/","keywords":["generative-art"]}</script><title>Grid paintings Ã  la Mondrian with JavaScript â€¢ Max Halford</title>
<meta property="og:title" content="Grid paintings Ã  la Mondrian with JavaScript â€¢ Max Halford"><meta property="og:type" content="article"><meta name=description content="I was at a laundrette today and had just finished my book so I had some time to kill. Naturally I devised an algorithm for generating drawings that would resemble the grid-like paintings that Piet Mondrian made famous. With the benefit of hindsight I guess I could indulge in saner activities while waiting for my laundry to dry!
I went through different ideas but in the end I settled on a recursive approach."><link rel=stylesheet href=/css/flexboxgrid-6.3.1.min.css><link rel=stylesheet href=/css/github-markdown.min.css><link rel=stylesheet href=/css/highlight/github.css><link rel=stylesheet href=/css/index.css><link rel=preconnect href=https://fonts.gstatic.com><link href="https://fonts.googleapis.com/css2?family=PT+Serif:wght@400;700&family=Permanent+Marker&display=swap" rel=stylesheet><script>MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]],displayMath:[["$$","$$"],["\\[","\\]"]],processEscapes:!0,processEnvironments:!0,tags:"ams"},options:{skipHtmlTags:["script","noscript","style","textarea","pre"]}},window.addEventListener("load",e=>{document.querySelectorAll("mjx-container").forEach(function(e){e.parentElement.classList+="has-jax"})})</script><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script type=text/javascript id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script></head><body><article class=post id=article><div class="row center-xs" style=text-align:left><div class="col-xs-12 col-sm-10 col-md-7 col-lg-5"><div class=header><header class=header-parts><div class="signatures site-title"><a href=/>Max Halford ãƒ„</a></div><div class=header-links><a class=header-link href=/>Blog</a>
<a class=header-link href=/links/>Links</a>
<a class=header-link href=/bio/>Bio</a></div></header></div><header class=post-header><h1 class=post-title>Grid paintings Ã  la Mondrian with JavaScript</h1><div class="row post-desc"><div class="col-xs-12 post-desc-items"><time class=post-date datetime="2017-03-04 00:00:00 UTC">2017-03-04
</time><span class=posts-line-tag>generative-art</span></div></div></header><div class="post-content markdown-body"><p>I was at a laundrette today and had just finished my book so I had some time to kill. Naturally I devised an algorithm for generating drawings that would resemble the <a href="https://www.google.co.uk/search?q=piet+mondrian+grid+painting">grid-like paintings</a> that <a href=https://en.wikipedia.org/wiki/Piet_Mondrian>Piet Mondrian</a> made famous. With the benefit of hindsight I guess I could indulge in saner activities while waiting for my laundry to dry!</p><p>I went through different ideas but in the end I settled on a recursive approach. My idea is to divide a rectangle into two smaller ones and then to do the same with each sub-rectangle. Every time a rectangle is generated and is then filled with a random color; like Mondrian I use yellow, red, blue, black and white.</p><h2 id=the-work>The work</h2><p>In the end the algorithm I implemented generates images like these.</p><p><img src=/img/blog/mondrian/result1.png alt=result1>
<img src=/img/blog/mondrian/result2.png alt=result2>
<img src=/img/blog/mondrian/result3.png alt=result3></p><h2 id=the-code>The code</h2><p>The implementation is very short. I started by defining two classes - <code>Point</code> and <code>Rectangle</code> - for the sake of tidiness.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>class</span> <span class=nx>Point</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>constructor</span><span class=p>(</span><span class=nx>x</span><span class=p>,</span> <span class=nx>y</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>x</span> <span class=o>=</span> <span class=nx>x</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>y</span> <span class=o>=</span> <span class=nx>y</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>class</span> <span class=nx>Rectangle</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>constructor</span><span class=p>(</span><span class=nx>min</span><span class=p>,</span> <span class=nx>max</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>min</span> <span class=o>=</span> <span class=nx>min</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>max</span> <span class=o>=</span> <span class=nx>max</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>get</span> <span class=nx>width</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=k>this</span><span class=p>.</span><span class=nx>max</span><span class=p>.</span><span class=nx>x</span> <span class=o>-</span> <span class=k>this</span><span class=p>.</span><span class=nx>min</span><span class=p>.</span><span class=nx>x</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>get</span> <span class=nx>height</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=k>this</span><span class=p>.</span><span class=nx>max</span><span class=p>.</span><span class=nx>y</span> <span class=o>-</span> <span class=k>this</span><span class=p>.</span><span class=nx>min</span><span class=p>.</span><span class=nx>y</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>A rectangle is thus defined by an upper left point - called <code>min</code> - and a lower right point - called <code>max</code>. Here is an image just to make things clear.</p><p><img src=/img/blog/mondrian/rectangle.png alt=rectangle></p><p>The next step is to be able to draw a rectangle. The <a href=https://developer.mozilla.org/en/docs/Web/API/CanvasRenderingContext2D>CanvasRenderingContext2D</a> has a <code>strokeRect(x1, y1, x2, y2)</code> method but I had already written something before I knew this; anyway it isn&rsquo;t very complicated. I attached the method to the <code>Rectangle</code> class.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>class</span> <span class=nx>Rectangle</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>draw</span><span class=p>(</span><span class=nx>ctx</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>ctx</span><span class=p>.</span><span class=nx>moveTo</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>min</span><span class=p>.</span><span class=nx>x</span><span class=p>,</span> <span class=k>this</span><span class=p>.</span><span class=nx>min</span><span class=p>.</span><span class=nx>y</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nx>ctx</span><span class=p>.</span><span class=nx>lineTo</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>max</span><span class=p>.</span><span class=nx>x</span><span class=p>,</span> <span class=k>this</span><span class=p>.</span><span class=nx>min</span><span class=p>.</span><span class=nx>y</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nx>ctx</span><span class=p>.</span><span class=nx>lineTo</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>max</span><span class=p>.</span><span class=nx>x</span><span class=p>,</span> <span class=k>this</span><span class=p>.</span><span class=nx>max</span><span class=p>.</span><span class=nx>y</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nx>ctx</span><span class=p>.</span><span class=nx>lineTo</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>min</span><span class=p>.</span><span class=nx>x</span><span class=p>,</span> <span class=k>this</span><span class=p>.</span><span class=nx>max</span><span class=p>.</span><span class=nx>y</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nx>ctx</span><span class=p>.</span><span class=nx>lineTo</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>min</span><span class=p>.</span><span class=nx>x</span><span class=p>,</span> <span class=k>this</span><span class=p>.</span><span class=nx>min</span><span class=p>.</span><span class=nx>y</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>I simply go around each corner of the rectangle in a clockwise fashion, starting at the top-left corner.</p><p><img src=/img/blog/mondrian/clockwise.png alt=clockwise></p><p>Kid&rsquo;s stuff! Now comes the interesting part. The next step is to split a rectangle in two; there are two pitfalls to handle:</p><ol><li>A rectangle can be half in two ways, either left/right or either top/bottom.</li><li>A split can produce rectangles which are too narrow and not visually appealing.</li></ol><p>To handle the first pitfall, I split the rectangle into a left and a right rectangle if the rectangle&rsquo;s width is greater than it&rsquo;s height and <em>vice-versa</em>. To generate two sub-rectangles, I simply choose a random point along the $x$-axis in case of a left/right split or along $y$-axis in case of a top/bottom split.</p><p>To handle the second pitfall, I defined some padding numbers so that the points I generated were not too close to the current rectangle&rsquo;s edges. The code for splitting a rectangle goes as follows:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>class</span> <span class=nx>Rectangle</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>split</span><span class=p>(</span><span class=nx>xPad</span><span class=p>,</span> <span class=nx>yPad</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>width</span> <span class=o>&gt;</span> <span class=k>this</span><span class=p>.</span><span class=nx>height</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kd>var</span> <span class=nx>x</span> <span class=o>=</span> <span class=nx>randInt</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>min</span><span class=p>.</span><span class=nx>x</span> <span class=o>+</span> <span class=nx>xPad</span><span class=p>,</span> <span class=k>this</span><span class=p>.</span><span class=nx>max</span><span class=p>.</span><span class=nx>x</span> <span class=o>-</span> <span class=nx>xPad</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=kd>var</span> <span class=nx>r1</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Rectangle</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>min</span><span class=p>,</span> <span class=k>new</span> <span class=nx>Point</span><span class=p>(</span><span class=nx>x</span><span class=p>,</span> <span class=k>this</span><span class=p>.</span><span class=nx>max</span><span class=p>.</span><span class=nx>y</span><span class=p>))</span>
</span></span><span class=line><span class=cl>            <span class=kd>var</span> <span class=nx>r2</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Rectangle</span><span class=p>(</span><span class=k>new</span> <span class=nx>Point</span><span class=p>(</span><span class=nx>x</span><span class=p>,</span> <span class=k>this</span><span class=p>.</span><span class=nx>min</span><span class=p>.</span><span class=nx>y</span><span class=p>),</span> <span class=k>this</span><span class=p>.</span><span class=nx>max</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kd>var</span> <span class=nx>y</span> <span class=o>=</span> <span class=nx>randInt</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>min</span><span class=p>.</span><span class=nx>y</span> <span class=o>+</span> <span class=nx>yPad</span><span class=p>,</span> <span class=k>this</span><span class=p>.</span><span class=nx>max</span><span class=p>.</span><span class=nx>y</span> <span class=o>-</span> <span class=nx>yPad</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=kd>var</span> <span class=nx>r1</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Rectangle</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>min</span><span class=p>,</span> <span class=k>new</span> <span class=nx>Point</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>max</span><span class=p>.</span><span class=nx>x</span><span class=p>,</span> <span class=nx>y</span><span class=p>))</span>
</span></span><span class=line><span class=cl>            <span class=kd>var</span> <span class=nx>r2</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Rectangle</span><span class=p>(</span><span class=k>new</span> <span class=nx>Point</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>min</span><span class=p>.</span><span class=nx>x</span><span class=p>,</span> <span class=nx>y</span><span class=p>),</span> <span class=k>this</span><span class=p>.</span><span class=nx>max</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>[</span><span class=nx>r1</span><span class=p>,</span> <span class=nx>r2</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>It takes some time to get the point juggling right but all in all it&rsquo;s pretty easy; the following illustration might help.</p><p><img src=/img/blog/mondrian/split.png alt=split></p><p>The <code>randInt</code> function simply generates an integer in the $[a, b)$ range, here is it&rsquo;s definition:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>function</span> <span class=nx>randInt</span><span class=p>(</span><span class=nx>min</span><span class=p>,</span> <span class=nx>max</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nb>Math</span><span class=p>.</span><span class=nx>floor</span><span class=p>(</span><span class=nb>Math</span><span class=p>.</span><span class=nx>random</span><span class=p>()</span> <span class=o>*</span> <span class=p>(</span><span class=nx>max</span> <span class=o>-</span> <span class=nx>min</span><span class=p>)</span> <span class=o>+</span> <span class=nx>min</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>As I mentioned the algorithm has to be recursive. This is easy to do, we only have to call the <code>split</code> method on each sub-rectangle. However the issue is to know when to stop. To fix this I simply introduced a <code>depth</code> parameter in the call to the <code>split</code> method; if the current depth is higher than a fixed limit then the recursion stops. Moreover, if a rectangle is too small - <em>i.e.</em> it not wide enough or not tall enough - then the recursion also stops. Finally I added the contouring and the filling of the rectangles into the <code>split</code> method. All in all the code is the following:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>var</span> <span class=nx>colors</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;white&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;white&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;white&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;white&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;black&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;red&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;blue&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;yellow&#39;</span>
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>class</span> <span class=nx>Rectangle</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>split</span><span class=p>(</span><span class=nx>xPad</span><span class=p>,</span> <span class=nx>yPad</span><span class=p>,</span> <span class=nx>depth</span><span class=p>,</span> <span class=nx>limit</span><span class=p>,</span> <span class=nx>ctx</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=nx>ctx</span><span class=p>.</span><span class=nx>fillStyle</span> <span class=o>=</span> <span class=nx>colors</span><span class=p>[</span><span class=nx>randInt</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=nx>colors</span><span class=p>.</span><span class=nx>length</span><span class=p>)]</span>
</span></span><span class=line><span class=cl>        <span class=nx>ctx</span><span class=p>.</span><span class=nx>fillRect</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>min</span><span class=p>.</span><span class=nx>x</span><span class=p>,</span> <span class=k>this</span><span class=p>.</span><span class=nx>min</span><span class=p>.</span><span class=nx>y</span><span class=p>,</span> <span class=k>this</span><span class=p>.</span><span class=nx>max</span><span class=p>.</span><span class=nx>x</span><span class=p>,</span> <span class=k>this</span><span class=p>.</span><span class=nx>max</span><span class=p>.</span><span class=nx>y</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>draw</span><span class=p>(</span><span class=nx>ctx</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// Check the level of recursion
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>if</span> <span class=p>(</span><span class=nx>depth</span> <span class=o>==</span> <span class=nx>limit</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// Check the rectangle is enough large and tall
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>if</span> <span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>width</span> <span class=o>&lt;</span> <span class=mi>2</span> <span class=o>*</span> <span class=nx>xPad</span> <span class=o>||</span> <span class=k>this</span><span class=p>.</span><span class=nx>height</span> <span class=o>&lt;</span> <span class=mi>2</span> <span class=o>*</span><span class=nx>yPad</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// If the rectangle is wider than it&#39;s height do a left/right split
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>if</span> <span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>width</span> <span class=o>&gt;</span> <span class=k>this</span><span class=p>.</span><span class=nx>height</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kd>var</span> <span class=nx>x</span> <span class=o>=</span> <span class=nx>randInt</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>min</span><span class=p>.</span><span class=nx>x</span> <span class=o>+</span> <span class=nx>xPad</span><span class=p>,</span> <span class=k>this</span><span class=p>.</span><span class=nx>max</span><span class=p>.</span><span class=nx>x</span> <span class=o>-</span> <span class=nx>xPad</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=kd>var</span> <span class=nx>r1</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Rectangle</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>min</span><span class=p>,</span> <span class=k>new</span> <span class=nx>Point</span><span class=p>(</span><span class=nx>x</span><span class=p>,</span> <span class=k>this</span><span class=p>.</span><span class=nx>max</span><span class=p>.</span><span class=nx>y</span><span class=p>))</span>
</span></span><span class=line><span class=cl>            <span class=kd>var</span> <span class=nx>r2</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Rectangle</span><span class=p>(</span><span class=k>new</span> <span class=nx>Point</span><span class=p>(</span><span class=nx>x</span><span class=p>,</span> <span class=k>this</span><span class=p>.</span><span class=nx>min</span><span class=p>.</span><span class=nx>y</span><span class=p>),</span> <span class=k>this</span><span class=p>.</span><span class=nx>max</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=c1>// Else do a top/bottom split
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kd>var</span> <span class=nx>y</span> <span class=o>=</span> <span class=nx>randInt</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>min</span><span class=p>.</span><span class=nx>y</span> <span class=o>+</span> <span class=nx>yPad</span><span class=p>,</span> <span class=k>this</span><span class=p>.</span><span class=nx>max</span><span class=p>.</span><span class=nx>y</span> <span class=o>-</span> <span class=nx>yPad</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=kd>var</span> <span class=nx>r1</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Rectangle</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>min</span><span class=p>,</span> <span class=k>new</span> <span class=nx>Point</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>max</span><span class=p>.</span><span class=nx>x</span><span class=p>,</span> <span class=nx>y</span><span class=p>))</span>
</span></span><span class=line><span class=cl>            <span class=kd>var</span> <span class=nx>r2</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Rectangle</span><span class=p>(</span><span class=k>new</span> <span class=nx>Point</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>min</span><span class=p>.</span><span class=nx>x</span><span class=p>,</span> <span class=nx>y</span><span class=p>),</span> <span class=k>this</span><span class=p>.</span><span class=nx>max</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// Split the sub-rectangles
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>r1</span><span class=p>.</span><span class=nx>split</span><span class=p>(</span><span class=nx>xPad</span><span class=p>,</span> <span class=nx>yPad</span><span class=p>,</span> <span class=nx>depth</span><span class=o>+</span><span class=mi>1</span><span class=p>,</span> <span class=nx>limit</span><span class=p>,</span> <span class=nx>ctx</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nx>r2</span><span class=p>.</span><span class=nx>split</span><span class=p>(</span><span class=nx>xPad</span><span class=p>,</span> <span class=nx>yPad</span><span class=p>,</span> <span class=nx>depth</span><span class=o>+</span><span class=mi>1</span><span class=p>,</span> <span class=nx>limit</span><span class=p>,</span> <span class=nx>ctx</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>The <code>colors</code> variable has more whites so that the white color appears more often on the resulting image. To run the code with a canvas we simply have to obtain the canvas&rsquo;s dimensions, create a rectangle from these dimensions and then call the <code>split</code> method on this initial rectangle.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>var</span> <span class=nx>c</span> <span class=o>=</span> <span class=nb>document</span><span class=p>.</span><span class=nx>getElementById</span><span class=p>(</span><span class=s2>&#34;doodle&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>ctx</span> <span class=o>=</span> <span class=nx>c</span><span class=p>.</span><span class=nx>getContext</span><span class=p>(</span><span class=s2>&#34;2d&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>ctx</span><span class=p>.</span><span class=nx>beginPath</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=nx>ctx</span><span class=p>.</span><span class=nx>lineWidth</span> <span class=o>=</span> <span class=mi>4</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>xPad</span> <span class=o>=</span> <span class=nb>Math</span><span class=p>.</span><span class=nx>floor</span><span class=p>(</span><span class=nx>c</span><span class=p>.</span><span class=nx>width</span> <span class=o>*</span> <span class=mf>0.1</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>yPad</span> <span class=o>=</span> <span class=nb>Math</span><span class=p>.</span><span class=nx>floor</span><span class=p>(</span><span class=nx>c</span><span class=p>.</span><span class=nx>height</span> <span class=o>*</span> <span class=mf>0.1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>initialRect</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Rectangle</span><span class=p>(</span><span class=k>new</span> <span class=nx>Point</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>),</span> <span class=k>new</span> <span class=nx>Point</span><span class=p>(</span><span class=nx>c</span><span class=p>.</span><span class=nx>width</span><span class=p>,</span> <span class=nx>c</span><span class=p>.</span><span class=nx>height</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>initialRect</span><span class=p>.</span><span class=nx>split</span><span class=p>(</span><span class=nx>xPad</span><span class=p>,</span> <span class=nx>yPad</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=nx>ctx</span><span class=p>)</span>
</span></span></code></pre></div><p>That&rsquo;s all there is to it! The full code is <a href=https://github.com/MaxHalford/procedural-art/blob/master/2_mondrian.html>available on GitHub</a>. I hope you enjoyed the read!</p></div><script type=text/javascript>var s=document.createElement("script");s.setAttribute("src","https://utteranc.es/client.js"),s.setAttribute("repo","MaxHalford/maxhalford.github.io"),s.setAttribute("issue-term","pathname"),s.setAttribute("crossorigin","anonymous"),s.setAttribute("async",null),s.setAttribute("theme","github-light"),document.body.appendChild(s)</script><div style=display:flex;flex-direction:row;justify-content:center;align-items:center;gap:20px;margin-bottom:30px><div class=do-the-thing><div class=elevator><svg class="sweet-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 100 100" enable-background="new 0 0 100 100" height="100" width="100"><path d="M70 47.5H30c-1.4.0-2.5 1.1-2.5 2.5v40c0 1.4 1.1 2.5 2.5 2.5h40c1.4.0 2.5-1.1 2.5-2.5V50C72.5 48.6 71.4 47.5 70 47.5zm-22.5 40h-5v-25h5v25zm10 0h-5v-25h5v25zm10 0h-5V60c0-1.4-1.1-2.5-2.5-2.5H40c-1.4.0-2.5 1.1-2.5 2.5v27.5h-5v-35h35v35z"/><path d="M50 42.5c1.4.0 2.5-1.1 2.5-2.5V16l5.7 5.7c.5.5 1.1.7 1.8.7s1.3-.2 1.8-.7c1-1 1-2.6.0-3.5l-10-10c-1-1-2.6-1-3.5.0l-10 10c-1 1-1 2.6.0 3.5 1 1 2.6 1 3.5.0l5.7-5.7v24c0 1.4 1.1 2.5 2.5 2.5z"/></svg>Back to the top</div></div><iframe src=https://github.com/sponsors/MaxHalford/button title="Sponsor MaxHalford" height=32 width=114 style=border:0;border-radius:6px></iframe></div><script src=https://cdnjs.cloudflare.com/ajax/libs/elevator.js/1.0.1/elevator.min.js></script><script>var elementButton=document.querySelector(".elevator"),elevator=new Elevator({element:elementButton,mainAudio:"/music/elevator.mp3",endAudio:"/music/ding.mp3"})</script><style>.down-arrow{font-size:120px;margin-top:90px;margin-bottom:90px;text-shadow:0 -20px #0c1f31,0 0 #c33329;color:transparent;-webkit-transform:scaleY(.8);-moz-transform:scaleY(.8);transform:scaleY(.8)}.elevator{text-align:center;cursor:pointer;width:140px;margin:auto}.elevator:hover{opacity:.7}.elevator svg{width:40px;height:40px;display:block;margin:auto;margin-bottom:5px}</style><div class=related-content><h3 style=margin-top:10px!important;margin-bottom:10px!important>Related posts</h3><ul style=margin-top:0><li><a href=/blog/recursive-polygons/>Recursive polygons with JavaScript</a></li></ul></div></div></div></article></body></html>